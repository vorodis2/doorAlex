{"code":"!function(t){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(t,i){!function(t,e){if(!w[t]||!x[t])return;for(var i in x[t]=!1,e)Object.prototype.hasOwnProperty.call(e,i)&&(m[i]=e[i]);0==--g&&0===_&&T()}(t,i),e&&e(t,i)};var i,s=!0,n=\"8b0030ce420132305ad7\",r=1e4,o={},a=[],h=[];function c(t){var e=S[t];if(!e)return H;var s=function(s){return e.hot.active?(S[s]?-1===S[s].parents.indexOf(t)&&S[s].parents.push(t):(a=[t],i=s),-1===e.children.indexOf(s)&&e.children.push(s)):(console.warn(\"[HMR] unexpected require(\"+s+\") from disposed module \"+t),a=[]),H(s)},n=function(t){return{configurable:!0,enumerable:!0,get:function(){return H[t]},set:function(e){H[t]=e}}};for(var r in H)Object.prototype.hasOwnProperty.call(H,r)&&\"e\"!==r&&\"t\"!==r&&Object.defineProperty(s,r,n(r));return s.e=function(t){return\"ready\"===u&&p(\"prepare\"),_++,H.e(t).then(e,function(t){throw e(),t});function e(){_--,\"prepare\"===u&&(b[t]||R(t),0===_&&0===g&&T())}},s.t=function(t,e){return 1&e&&(t=s(t)),H.t(t,-2&e)},s}function d(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==t,active:!0,accept:function(t,i){if(void 0===t)e._selfAccepted=!0;else if(\"function\"==typeof t)e._selfAccepted=t;else if(\"object\"==typeof t)for(var s=0;s<t.length;s++)e._acceptedDependencies[t[s]]=i||function(){};else e._acceptedDependencies[t]=i||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if(\"object\"==typeof t)for(var i=0;i<t.length;i++)e._declinedDependencies[t[i]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var i=e._disposeHandlers.indexOf(t);i>=0&&e._disposeHandlers.splice(i,1)},check:y,apply:D,status:function(t){if(!t)return u;l.push(t)},addStatusHandler:function(t){l.push(t)},removeStatusHandler:function(t){var e=l.indexOf(t);e>=0&&l.splice(e,1)},data:o[t]};return i=void 0,e}var l=[],u=\"idle\";function p(t){u=t;for(var e=0;e<l.length;e++)l[e].call(null,t)}var f,m,v,g=0,_=0,b={},x={},w={};function E(t){return+t+\"\"===t?+t:t}function y(t){if(\"idle\"!==u)throw new Error(\"check() is only allowed in idle status\");return s=t,p(\"check\"),(e=r,e=e||1e4,new Promise(function(t,i){if(\"undefined\"==typeof XMLHttpRequest)return i(new Error(\"No browser support\"));try{var s=new XMLHttpRequest,r=H.p+\"\"+n+\".hot-update.json\";s.open(\"GET\",r,!0),s.timeout=e,s.send(null)}catch(t){return i(t)}s.onreadystatechange=function(){if(4===s.readyState)if(0===s.status)i(new Error(\"Manifest request to \"+r+\" timed out.\"));else if(404===s.status)t();else if(200!==s.status&&304!==s.status)i(new Error(\"Manifest request to \"+r+\" failed.\"));else{try{var e=JSON.parse(s.responseText)}catch(t){return void i(t)}t(e)}}})).then(function(t){if(!t)return p(\"idle\"),null;x={},b={},w=t.c,v=t.h,p(\"prepare\");var e=new Promise(function(t,e){f={resolve:t,reject:e}});m={};return R(0),\"prepare\"===u&&0===_&&0===g&&T(),e});var e}function R(t){w[t]?(x[t]=!0,g++,function(t){var e=document.createElement(\"script\");e.charset=\"utf-8\",e.src=H.p+\"\"+t+\".\"+n+\".hot-update.js\",document.head.appendChild(e)}(t)):b[t]=!0}function T(){p(\"ready\");var t=f;if(f=null,t)if(s)Promise.resolve().then(function(){return D(s)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&e.push(E(i));t.resolve(e)}}function D(e){if(\"ready\"!==u)throw new Error(\"apply() is only allowed in ready status\");var i,s,r,h,c;function d(t){for(var e=[t],i={},s=e.slice().map(function(t){return{chain:[t],id:t}});s.length>0;){var n=s.pop(),r=n.id,o=n.chain;if((h=S[r])&&!h.hot._selfAccepted){if(h.hot._selfDeclined)return{type:\"self-declined\",chain:o,moduleId:r};if(h.hot._main)return{type:\"unaccepted\",chain:o,moduleId:r};for(var a=0;a<h.parents.length;a++){var c=h.parents[a],d=S[c];if(d){if(d.hot._declinedDependencies[r])return{type:\"declined\",chain:o.concat([c]),moduleId:r,parentId:c};-1===e.indexOf(c)&&(d.hot._acceptedDependencies[r]?(i[c]||(i[c]=[]),l(i[c],[r])):(delete i[c],e.push(c),s.push({chain:o.concat([c]),id:c})))}}}}return{type:\"accepted\",moduleId:t,outdatedModules:e,outdatedDependencies:i}}function l(t,e){for(var i=0;i<e.length;i++){var s=e[i];-1===t.indexOf(s)&&t.push(s)}}e=e||{};var f={},g=[],_={},b=function(){console.warn(\"[HMR] unexpected require(\"+y.moduleId+\") to disposed module\")};for(var x in m)if(Object.prototype.hasOwnProperty.call(m,x)){var y;c=E(x);var R=!1,T=!1,D=!1,P=\"\";switch((y=m[x]?d(c):{type:\"disposed\",moduleId:x}).chain&&(P=\"\\nUpdate propagation: \"+y.chain.join(\" -> \")),y.type){case\"self-declined\":e.onDeclined&&e.onDeclined(y),e.ignoreDeclined||(R=new Error(\"Aborted because of self decline: \"+y.moduleId+P));break;case\"declined\":e.onDeclined&&e.onDeclined(y),e.ignoreDeclined||(R=new Error(\"Aborted because of declined dependency: \"+y.moduleId+\" in \"+y.parentId+P));break;case\"unaccepted\":e.onUnaccepted&&e.onUnaccepted(y),e.ignoreUnaccepted||(R=new Error(\"Aborted because \"+c+\" is not accepted\"+P));break;case\"accepted\":e.onAccepted&&e.onAccepted(y),T=!0;break;case\"disposed\":e.onDisposed&&e.onDisposed(y),D=!0;break;default:throw new Error(\"Unexception type \"+y.type)}if(R)return p(\"abort\"),Promise.reject(R);if(T)for(c in _[c]=m[c],l(g,y.outdatedModules),y.outdatedDependencies)Object.prototype.hasOwnProperty.call(y.outdatedDependencies,c)&&(f[c]||(f[c]=[]),l(f[c],y.outdatedDependencies[c]));D&&(l(g,[y.moduleId]),_[c]=b)}var M,C=[];for(s=0;s<g.length;s++)c=g[s],S[c]&&S[c].hot._selfAccepted&&C.push({module:c,errorHandler:S[c].hot._selfAccepted});p(\"dispose\"),Object.keys(w).forEach(function(t){!1===w[t]&&function(t){delete installedChunks[t]}(t)});for(var O,A,j=g.slice();j.length>0;)if(c=j.pop(),h=S[c]){var L={},z=h.hot._disposeHandlers;for(r=0;r<z.length;r++)(i=z[r])(L);for(o[c]=L,h.hot.active=!1,delete S[c],delete f[c],r=0;r<h.children.length;r++){var I=S[h.children[r]];I&&((M=I.parents.indexOf(c))>=0&&I.parents.splice(M,1))}}for(c in f)if(Object.prototype.hasOwnProperty.call(f,c)&&(h=S[c]))for(A=f[c],r=0;r<A.length;r++)O=A[r],(M=h.children.indexOf(O))>=0&&h.children.splice(M,1);for(c in p(\"apply\"),n=v,_)Object.prototype.hasOwnProperty.call(_,c)&&(t[c]=_[c]);var V=null;for(c in f)if(Object.prototype.hasOwnProperty.call(f,c)&&(h=S[c])){A=f[c];var B=[];for(s=0;s<A.length;s++)if(O=A[s],i=h.hot._acceptedDependencies[O]){if(-1!==B.indexOf(i))continue;B.push(i)}for(s=0;s<B.length;s++){i=B[s];try{i(A)}catch(t){e.onErrored&&e.onErrored({type:\"accept-errored\",moduleId:c,dependencyId:A[s],error:t}),e.ignoreErrored||V||(V=t)}}}for(s=0;s<C.length;s++){var N=C[s];c=N.module,a=[c];try{H(c)}catch(t){if(\"function\"==typeof N.errorHandler)try{N.errorHandler(t)}catch(i){e.onErrored&&e.onErrored({type:\"self-accept-error-handler-errored\",moduleId:c,error:i,originalError:t}),e.ignoreErrored||V||(V=i),V||(V=t)}else e.onErrored&&e.onErrored({type:\"self-accept-errored\",moduleId:c,error:t}),e.ignoreErrored||V||(V=t)}}return V?(p(\"fail\"),Promise.reject(V)):(p(\"idle\"),new Promise(function(t){t(g)}))}var S={};function H(e){if(S[e])return S[e].exports;var i=S[e]={i:e,l:!1,exports:{},hot:d(e),parents:(h=a,a=[],h),children:[]};return t[e].call(i.exports,i,i.exports,c(e)),i.l=!0,i.exports}H.m=t,H.c=S,H.d=function(t,e,i){H.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},H.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},H.t=function(t,e){if(1&e&&(t=H(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(H.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var s in t)H.d(i,s,function(e){return t[e]}.bind(null,s));return i},H.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return H.d(e,\"a\",e),e},H.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},H.p=\"build/\",H.h=function(){return n},c(8)(H.s=8)}([function(t,e,i){\"use strict\";function s(){this.event=void 0,this.arrSobName=[\"up\",\"down\",\"move\",\"out\",\"over\",\"wheel\"],this.arrSob=[[],[],[],[],[],[]],this.pozSob=void 0,this.dispatcherEvent=function(t,e){for(var i=0;i<this.arrSobName.length;i++)if(this.arrSobName[i]==t){e&&(e.type=t);for(var s=0;s<this.arrSob[i].length;s++)this.arrSob[i][s](e)}},this.removeEvent=function(t,e){for(var i=0;i<this.arrSobName.length;i++)if(this.arrSobName[i]==t)for(var s=0;s<this.arrSob[i].length;s++)this.arrSob[i][s]==e&&this.arrSob[i].splice(s,1)},this.addEvent=function(t,e){for(var i=0;i<this.arrSobName.length;i++)this.arrSobName[i]==t&&this.arrSob[i].push(e)}}function n(){this.target=void 0,this.face=void 0,this.point=void 0,this.faceIndex=void 0,this.type=void 0,this.uv=void 0,this.originalEvent=void 0,this.copy=function(){var t=new n;return t.target=this.target,t.face=this.face,t.point=this.point,t.faceIndex=this.faceIndex,t.type=this.type,t.uv=this.uv,t.originalEvent=this.originalEvent,t}}function r(t,e,i,r){this.parent=t;var o,a=this;this.camera=e,this.raycaster=new THREE.Raycaster,this.intersects,this.point=new THREE.Vector2(0,0),this.pointWH=new THREE.Vector2(0,0),this.arrChild=[],this.uuid=\"nullMy\",this.obj3d,this.cont=void 0,this.eventSob=new s,this.event3D=new n,this.xzNull=\"xzNull\",this.poiskName=\"xzPoisk\",this.tokoName=\"null\",this._activ=!0,this.rect={x:0,y:0,width:100,height:100},this.setRect=function(t,e,i,s){this.rect.x=t,this.rect.y=e,this.rect.width=i,this.rect.height=s},this.removeChild=function(t){for(var e=0;e<this.arrChild.length;e++)t.uuid==this.arrChild[e].uuid&&(this.arrChild.splice(e,1),(e-=1)<0&&(e=0))},this.addChild=function(t){this.arrChild.push(t)},this.boolNum=-1,this.boolNumOld=-1,this.event,this.mouseRay=function(){0!=this._activ&&(this.rayPusk(),this.boolNum=this.getGoodParam(),-1==this.boolNum?\"nullMy\"!=this.uuid&&(this.eventSob.dispatcherEvent(\"out\",this.event3D),this.uuid=\"nullMy\"):\"nullMy\"!=this.uuid?this.uuid!=this.intersects[this.boolNum].object.uuid?(this.eventSob.dispatcherEvent(\"out\",this.event3D),this.uuid=this.intersects[this.boolNum].object.uuid,this.event3D.target=this.intersects[this.boolNum].object,this.event3D.face=this.intersects[this.boolNum].face,this.event3D.point=this.intersects[this.boolNum].point,this.event3D.faceIndex=this.intersects[this.boolNum].faceIndex,this.event3D.uv=this.intersects[this.boolNum].uv,this.event3D.originalEvent=a.event,this.eventSob.dispatcherEvent(\"over\",this.event3D)):(this.event3D.face=this.intersects[this.boolNum].face,this.event3D.point=this.intersects[this.boolNum].point,this.event3D.faceIndex=this.intersects[this.boolNum].faceIndex,this.event3D.uv=this.intersects[this.boolNum].uv,this.event3D.originalEvent=a.event,this.eventSob.dispatcherEvent(\"move\",this.event3D)):(this.uuid=this.intersects[this.boolNum].object.uuid,this.event3D.target=this.intersects[this.boolNum].object,this.event3D.face=this.intersects[this.boolNum].face,this.event3D.point=this.intersects[this.boolNum].point,this.event3D.faceIndex=this.intersects[this.boolNum].faceIndex,this.event3D.uv=this.intersects[this.boolNum].uv,this.event3D.originalEvent=a.event,this.eventSob.dispatcherEvent(\"over\",this.event3D)),this.boolNumOld=this.boolNum)},this.getPosition=function(t){var e=this.poiskName;if(this.poiskName=null!=t?t:\"xzPoisk\",this.restartPoint(),this.rayPusk(),this.poiskName=e,0!=this.intersects.length){var i=this.intersects.length-1;return-1==i&&(i=0),this.intersects[i]}return null};var h=new n;this.getNameEvent=function(t){if(this.restartPoint(),this.rayPusk(),0!=this.intersects.length)for(var e=0;e<this.intersects.length;e++)if(null!=this.intersects[e].object.parent&&this.intersects[e].object.name==t)return h.target=this.intersects[this.boolNum].object,h.face=this.intersects[this.boolNum].face,h.point=this.intersects[this.boolNum].point,h.faceIndex=this.intersects[this.boolNum].faceIndex,h.uv=this.intersects[this.boolNum].uv,h.originalEvent=a.event,h;return null},this.testVisiParam=function(t){return 0!=t.visible&&(null!=t.parent?this.testVisiParam(t.parent):\"Scene\"==t.type)},this.getGoodParam=function(){if(0!=this.intersects.length){var t;for(t=0;t<this.intersects.length;t++)0!=this.testVisiParam(this.intersects[t].object)&&null!=this.intersects[t].object.notActiv&&(this.intersects.splice(t,1),t=0);if(0==this.intersects.length)return-1;for(t=0;t<this.intersects.length;t++)if(0!=this.testVisiParam(this.intersects[t].object)&&this.intersects[t].object.name==this.poiskName)return t;for(t=0;t<this.intersects.length;t++)if(0!=this.testVisiParam(this.intersects[t].object)&&this.intersects[t].object.name!=this.xzNull)return t}return-1},this.rayPusk=function(){(o=new THREE.Vector3).setFromMatrixPosition(this.camera.matrixWorld),this.raycaster.ray.origin.copy(o),this.raycaster.ray.direction.set(this.point.x,this.point.y,.5).unproject(this.camera).sub(o).normalize(),this.intersects=this.raycaster.intersectObjects(this.arrChild,!0)},this.naCont=!1,this.mousemove=function(t){0!=a.naCont&&(null!=t.data?a.event=t.data.originalEvent:a.event=t,0!=a._activ&&(a.restartPoint(t),a.mouseRay(),a.intersects.length&&a.event.preventDefault()))},this.zdvigX=0,this.scale=1,this.pV=new THREE.Vector2(0,0),this.restartPoint=function(t){null!=a.cont?(a.pV.x=pl102.global.x,a.pV.y=pl102.global.y):(a.pV.x=t.clientX,a.pV.y=t.clientY),1==a.isRect(a.pV)?(a.point.x=-(this.rect.x-a.pV.x)/this.rect.width*2-1,a.point.y=-(-(this.rect.y-a.pV.y)/this.rect.height*2-1)):99999!=a.point.x&&(a.point.x=99999)},this.isRect=function(t){return t.x>=this.rect.x&&t.x<=this.rect.x+this.rect.width&&t.y>=this.rect.y&&t.y<=this.rect.y+this.rect.height},this.mouseup=function(t){null!=t.data?a.event=t.data.originalEvent:a.event=t,0!=a._activ&&(-1==a.boolNumOld?a.eventSob.dispatcherEvent(\"up\",null):(a.event3D.originalEvent=a.event,a.eventSob.dispatcherEvent(\"up\",a.event3D)),a.intersects.length&&a.event.preventDefault())},this.mousedown=function(t){null!=t.data?a.event=t.data.originalEvent:a.event=t,a.restartPoint(t),0!=a._activ&&(-1==a.boolNumOld?a.eventSob.dispatcherEvent(\"down\",null):(a.event3D.originalEvent=a.event,a.eventSob.dispatcherEvent(\"down\",a.event3D)),a.intersects.length&&a.event.preventDefault())},this.mouseout=function(t){a.naCont=!1,a.restartPoint(t),a.point.x=99999,a.mouseRay()},this.mouseover=function(t){a.naCont=!0,a.restartPoint(t),a.mouseRay()},this.mousewheel=function(t){null!=t.data?a.event=t.data.originalEvent:a.event=t,a.restartPoint(t),0!=a._activ&&(-1==a.boolNumOld?a.eventSob.dispatcherEvent(\"down\",null):(a.event3D.originalEvent=a.event,a.eventSob.dispatcherEvent(\"wheel\",t)))},this.addDragEvent=function(t){this.cont=t,null!=t?(t.on(\"mousemove\",a.mousemove),t.on(\"mouseup\",a.mouseup),t.on(\"mousedown\",a.mousedown),t.on(\"mouseout\",a.mouseout),t.on(\"mouseover\",a.mouseover),pl102Wheel.on(t,\"mousewheel\",a.mousewheel)):(i.addEventListener(\"mousemove\",a.mousemove),i.addEventListener(\"mouseup\",a.mouseup),i.addEventListener(\"mousedown\",a.mousedown),i.addEventListener(\"mouseout\",a.mouseout),i.addEventListener(\"mouseover\",a.mouseover))},this.removeDragEvent=function(t){t.off(\"mousemove\",a.mousemove),t.off(\"mouseup\",a.mouseup),t.off(\"mousedown\",a.mousedown),t.off(\"mouseout\",a.mouseout),t.off(\"mouseover\",a.mouseover),pl102Wheel.off(t,\"mousewheel\",a.mousewheel)},this.sizeWindow=function(t,e){this.pointWH.x=t,this.pointWH.y=e}}i.d(e,\"a\",function(){return r}),r.prototype={set activ(t){this._activ!=t&&(this._activ=t)},get activ(){return this._activ}}},function(t,e,i){\"use strict\";function s(t){this.parent=t;var e,i=this;this._active=!1,this.RADIUS=1e3,this.POS_X=0,this.POS_Y=0,this.POS_Z=0,this.LINK=\"null\",this.COLOR=\"0xffffff\",this._radius=this.RADIUS,this._link=this.LINK,this._color=this.COLOR,this._shadRotZ=this.parent.ROTATION_Z,this._rotZ=0,this._x=this.POS_X,this._y=this.POS_Y,this._z=this.POS_Z,this.mesh=void 0,this.cont3d=void 0,this.cont3d1=void 0,this.textur=void 0,this.init=function(){null==this.mesh&&(this.geometry=new THREE.SphereGeometry(1,32,32),this.loader=new THREE.TextureLoader,this.loaderHDR=new THREE.RGBELoader,this.material=new THREE.MeshBasicMaterial({side:THREE.BackSide,color:16777215}),this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.scale.set(this._radius,this._radius,this._radius),this.cont3d=new THREE.Object3D,this.cont3d1=new THREE.Object3D,this.cont3d.add(this.cont3d1),this.cont3d1.add(this.mesh),this.cont3d1.rotation.y=this._shadRotZ,this.mesh.rotation.y=this._rotZ,this.cont3d.rotation.x=-Math.PI/2)},this.dergActiv=function(){1==this._active?null==this.cont3d.parent&&this.parent.parent.groupObject.add(this.cont3d):null!=this.cont3d.parent&&this.parent.parent.groupObject.remove(this.cont3d)},this.dergLink=function(){\"null\"==this._link?null!=this.material.map&&(this.material.map=null,this.material.needsUpdate=!0):(0==(e=this.checkFormat(this._link))&&this.loader.load(this._link,function(t){i.textur=t,i.material.map=t,i.material.needsUpdate=!0,i.parent.parent.intRend=1}),1==e&&this.loaderHDR.load(this._link,function(t){i.textur=t,i.textur.encoding=THREE.RGBEEncoding,i.textur.minFilter=THREE.NearestFilter,i.textur.magFilter=THREE.NearestFilter,i.textur.flipY=!0,i.material.map=t,i.material.needsUpdate=!0,i.parent.parent.intRend=1}))},this.checkFormat=function(t){return-1!==t.indexOf(\".png\")?0:-1!==t.indexOf(\".jpeg\")?0:-1!==t.indexOf(\".jpg\")?0:t.length>150?-1!==t.indexOf(\"png\")?0:-1!==t.indexOf(\"jpeg\")?0:-1!==t.indexOf(\"jpg\")?0:1:1},this.render=function(){}}i.d(e,\"a\",function(){return s}),s.prototype={set x(t){this._x!==t&&(this._x=t,this.cont3d.position.x=t,this.parent.parent.intRend=1)},get x(){return this._x},set y(t){this._y!==t&&(this._y=t,this.cont3d.position.y=t,this.parent.parent.intRend=1)},get y(){return this._y},set z(t){this._z!==t&&(this._z=t,this.cont3d.position.z=t,this.parent.parent.intRend=1)},get z(){return this._z},set active(t){this._active!==t&&(this._active=t,this.init(),this.dergActiv())},get active(){return this._active},set radius(t){this._radius!==t&&(this._radius=t,null!=this.mesh&&this.mesh.scale.set(this._radius,this._radius,this._radius))},get radius(){return this._radius},set link(t){this._link!==t&&(this._link=t,this.init(),this.dergLink())},get link(){return this._link},set shadRotZ(t){this._shadRotZ!==t&&(this._shadRotZ=t,null!=this.mesh&&(this.cont3d1.rotation.y=this._shadRotZ))},get shadRotZ(){return this._shadRotZ},set rotZ(t){this._rotZ!==t&&(this._rotZ=t,null!=this.mesh&&(this.mesh.rotation.y=this._rotZ))},get rotZ(){return this._rotZ},set color(t){if(this._color!==t){this._color=t,this.init();var e=this._color;if(\"string\"==typeof e&&-1!=e.indexOf(\"x\")){var i=e.split(\"x\");e=\"#\"+i[1]}this.material.color=new THREE.Color(e)}},get color(){return this._color}}},function(t,e,i){\"use strict\";var s=i(5);i(0);function n(t,e,i,s){this.type=\"BCBody\";var n=this;this.fun=i,this.cont3d=e,this.bc3d=t,this.idArr=s,this._width=100,this._height=100,this._depth=100,this._color=t._color,this._life=!1,this._active=!1,this._text=null,this._boolAllText=t._boolAllText,this._sizeText=t._sizeText,this._activInt=0,this.cont3D=new THREE.Object3D,this.boxCont=new THREE.Object3D,this.cont3D.add(this.boxCont),this.material=new THREE.MeshPhongMaterial({color:this._color,transparent:!0,opacity:1}),this.box=new THREE.Mesh(this.bc3d.geometriBox,this.material),this.boxCont.add(this.box),this.box.idArr=this.idArr,this.textMesh=void 0,this.tween=new TWEEN.Tween(this.material),this.cont3DText=new THREE.Object3D,this.cont3D.add(this.cont3DText),this.cont3DText.visible=!1,this.cont3DText1=new THREE.Object3D,this.cont3DText.add(this.cont3DText1),this.textGeo=void 0,this.textMesh=void 0,this.dragText=function(){null!=this.bc3d.font&&(null!=this.textGeo&&(this.textGeo.dispose(),this.textGeo=void 0),this.textGeo=new THREE.TextGeometry(this._text,{font:this.bc3d.font,size:24,height:5,curveSegments:4,bevelThickness:2,bevelSize:1.5,bevelEnabled:!0}),null==this.textMesh?(this.textMesh=new THREE.Mesh(this.textGeo,this.bc3d.materialText),this.cont3DText1.add(this.textMesh),this.textMesh.rotation.x=-Math.PI/2):this.textMesh.geometry=this.textGeo,this.textGeo.computeBoundingBox(),this.textGeo.computeVertexNormals(),this.textMesh.position.x=-this.textGeo.boundingBox.max.x/2,this.dragSazeText())},this.tween.onUpdate(function(){t.glaf.visi3D.intRend=1}),this.tween.onComplete(function(){n.material.opacity=1,n.material.transparent=!1}),this.draw=function(){this.boxCont.scale.set(this._width,this._height,this._depth),this.boxCont.position.z=-this._depth/2,this.cont3DText.position.z=-this._depth-10},this.anumOver=function(){this.tween.stop(),this.material.transparent=!0,this.material.opacity=.5,this.tween.to({opacity:1},300),this.tween.start()},this.positCam=function(t,e){this.cont3DText.rotation.z=e,this.cont3DText1.rotation.x=t-Math.PI/2},this.setDrag=function(t){this._width=this.bc3d.width,this._height=this.bc3d.height,this._depth=t.depth,null!=t.color?this.color=t.color:this.color=this.bc3d.arrColor[this.idArr%2],this.text=t.text,this.draw(),this.life=!0,this.textActiv()},this.setPosition=function(t){this.cont3D.position.set(t.x,t.y,t.z)},this.textActiv=function(){1==this._boolAllText?this.cont3DText.visible=!0:this.cont3DText.visible=this._active},this.dragSazeText=function(){this.cont3DText.scale.set(this._sizeText/24,this._sizeText/24,this._sizeText/24)},this.dragModel=function(){if(null!=t.model){for(var e=0;e<2;e++)0!=this.boxCont.children.length&&(this.boxCont.remove(this.boxCont.children[0]),e=0);var i=t.model.clone();i.idArr=this.idArr,this.boxCont.add(i)}},this.draw()}function r(t,e,i){this.type=\"BC3D\";var s,r,a,h,c,d,l,u=this;this._otstup=10,this._width=64,this._height=64,this._kolII=5,this._color=12303291,this._color1=10066329,this.arrColor=[this._color,this._color1],this._boolAllText=!1,this._sizeText=24,this._colorText=10066329,this._activMouse=!0,this.minDepth=1,this.maxDepth=500,this._index=-1,this.fun=i,this.glaf=t,this.array=[],this.arrayCesh=[],this.objDin=void 0,this.geometriBox=new THREE.BoxBufferGeometry(1,1,1),this.font=void 0,this.model=void 0,this.cont3D=new THREE.Object3D,e&&e.add(this.cont3D),this.material=new THREE.MeshPhongMaterial({color:this._color}),this.box=new THREE.Mesh(this.geometriBox,this.material),this.cont3D.add(this.box),u.glaf.visi3D.objShadow(this.box,!0),this.drag3D=new o(this.glaf.visi3D),this.materialText=new THREE.MeshPhongMaterial({color:this._colorText}),this.setEvent=function(t,e){\"creat\"==t&&(this.objDin=this.creatBody(),this.objDin.setDrag(e),this.draw(),u.glaf.visi3D.objShadow(this.objDin.cont3D,!0))},this.setFont=function(t){u.font=t;for(var e=0;e<u.array.length;e++)u.array[e].dragText(),u.glaf.visi3D.objShadow(u.array[e].cont3D,!0)},this.setMesh=function(t){if(null!=t&&null!=t.geometry){this.model=t,null==this.model.geometry.boundingBox&&this.model.geometry.computeBoundingBox();var e=new THREE.Vector3(this.model.geometry.boundingBox.max.x-this.model.geometry.boundingBox.min.x,this.model.geometry.boundingBox.max.y-this.model.geometry.boundingBox.min.y,this.model.geometry.boundingBox.max.z-this.model.geometry.boundingBox.min.z);trace(this.model.geometry.boundingBox),this.model.scale.set(1/e.x,1/e.y,1/e.z),this.model.position.set(0,0,.5);for(var i=0;i<u.array.length;i++)u.array[i].dragModel(),u.glaf.visi3D.objShadow(u.array[i].cont3D,!0)}},this.stopDrag=function(){u.fun(\"stopDrag\"),u.glaf.visi3D.intRend=1},this.dragMouse=function(){(s=r-u.drag3D.valueY)<u.minDepth&&(s=u.minDepth),s>u.maxDepth&&(s=u.maxDepth),u.objDin.depth=s,u.fun(\"dragMouse\",u.objDin),u.glaf.visi3D.intRend=1},this.startDrag=function(t){this.fun(\"startDrag\",t),this.drag3D.start(t.target.parent.parent,this.dragMouse,this.stopDrag),u.glaf.visi3D.intRend=1},this.glaf.visi3D.addEvent(\"over\",function(t){null!=t&&null!=t.target&&null!=t.target.idArr&&t.target.idArr!=u.index&&(u.array[t.target.idArr].anumOver(),document.body.style.cursor=\"pointer\")}),this.glaf.visi3D.addEvent(\"out\",function(t){null!=t&&null!=t.target&&null!=t.target.idArr&&(document.body.style.cursor=\"default\")}),this.glaf.visi3D.addEvent(\"down\",function(t){null!=t?null!=t.target&&(u.index=t.target.idArr,r=u.objDin._depth,u.startDrag(t),u.glaf.visi3D.intRend=1):(u.index=-1,u.glaf.visi3D.intRend=1)}),this.otEvent=function(t,e){},this.creatBody=function(){for(var t=0;t<this.arrayCesh.length;t++)if(0==this.arrayCesh[t].life)return this.array[t]=this.arrayCesh[t],this.array[t].life=!0,this.array[t];var e=new n(this,this.cont3D,this.otEvent,this.array.length);return trace(\"xsdgdsgfdsgsdfgdsgfdsfgdsfgdfsg\"),this.array.push(e),this.arrayCesh.push(e),e},this.clear=function(){for(var t=0;t<this.array.length;t++)this.array[t].life=!1;this.array=[],this.draw()},this.drawColor=function(){new THREE.Color(this._color);this.material.color=new THREE.Color(this._color),this.arrColor[0]=1*this.color,this.arrColor[1]=1*this.color1;for(var t=0;t<this.array.length;t++)this.array[t].color=this.arrColor[t%2]},this.positCam=function(t,e){for(var i=0;i<this.array.length;i++)this.array[i].positCam(t,e);this.drag3D.cont3D.rotation.z=e};var p=new THREE.Vector3;this.draw=function(){a=0,0,c=0,d=0,l=Math.ceil(this.array.length/this._kolII),a=l>=2?this._kolII*(this._width+this._otstup)-this._otstup:this.array.length*(this._width+this._otstup)-this._otstup,h=l*(this._height+this._otstup)-this._otstup,p.set(this._width/2,0,0);for(var t=0;t<this.array.length;t++)p.set(c*(this._width+this._otstup)+this._width/2-a/2,-d*(this._height+this._otstup)-this._height/2+h/2,0),this.array[t].setPosition(p),++c>=this._kolII&&(d++,c=0);this.box.position.z=this._otstup/2,this.box.scale.set(2*this._otstup+a+2*this._width,2*this._otstup+h+2*this._height,this._otstup)},this.draw()}function o(t){this.visi3D=t;var e,i=this;this.planeGeometry=new THREE.PlaneGeometry(1,1,1),this.valueX=0,this.valueY=0,this.obj3d=void 0,this.fMove=void 0,this.fUp=void 0,this.startPoint=void 0,this.mast=1e4,this.cont3D=new THREE.Object3D,this.cont3D.name=\"eJS103\",this.material=new THREE.MeshPhongMaterial({color:16711680,transparent:!0,opacity:0}),this.geometry=new THREE.PlaneGeometry(1,1,1),this.arrP=[];for(var s=0;s<1;s++)(e=new THREE.Mesh(this.geometry,this.material)).scale.set(this.mast,this.mast,.001),e.renderOrder=100,e.name=\"eJS103\",this.cont3D.add(e),this.arrP.push(e),0==s&&(e.rotation.x=-Math.PI/2,e.rotation.z=Math.PI),1==s&&(e.rotation.x=Math.PI/2),2==s&&(e.rotation.y=Math.PI/2,e.rotation.z=Math.PI/2),3==s&&(e.rotation.y=-Math.PI/2,e.rotation.z=-Math.PI/2);this.move=function(t){null==i.startPoint&&(i.startPoint=new THREE.Vector2,i.startPoint.x=t.uv.x,i.startPoint.y=t.uv.y),i.valueX=(t.uv.x-i.startPoint.x)*i.mast,i.valueY=(t.uv.y-i.startPoint.y)*i.mast,i.fMove()},this.stageUp=function(t){null!=i.cont3D.parent&&i.cont3D.parent.remove(i.cont3D),i.visi3D.removeEvent(\"move\",i.move),document.body.removeEventListener(\"mouseup\",i.stageUp),i.startPoint=void 0,i.visi3D.event3DArr.addChild(i.cont3D),i.fUp()},this.start=function(t,e,s){this.obj3d=t,this.fMove=e,this.fUp=s,this.obj3d.add(i.cont3D),i.cont3D.updateMatrixWorld(),this.obj3d.updateMatrixWorld(),i.valueX=0,i.valueY=0,i.visi3D.event3DArr.poiskName=\"eJS103\",this.visi3D.addEvent(\"move\",this.move),i.visi3D.event3DArr.addChild(i.cont3D),document.body.addEventListener(\"mouseup\",i.stageUp)}}function a(t,e,i){this.type=\"BCView\";var n=this;this.div=t,this.fun=i,this._width=100,this._height=100,this._pause=!1,this._color=12303291,this._color1=10066329,this._boolShadow=!0,this._boolBottom=!0,this._boolAllText=!1,this._sizeText=24,this._colorText=10066329,this._activMouse=!0,this.visi3D=new s.a(t,e,!1,!0,!0,!0,!0),this.visi3D.utility._rotationX=.3,this.visi3D.utility._rotationZ=1,this.visi3D.utility.fixation=!0,this.visi3D.utility.sunActiv(!0),this.visi3D.shadowNeedsUpdate=!0,this.visi3D.rotationZ=.3,this.visi3D.rotationX=1,this.visi3D.zume=800,this.bc3d=new r(this,this.visi3D.groupObject,function(t,e){\"startDrag\"==t&&(n.visi3D.position3d.pause=!0),\"stopDrag\"==t&&(n.visi3D.position3d.pause=n._pause),\"objDin\"==t&&n.fun(t,e),\"dragMouse\"==t&&n.fun(t,e),\"index\"==t&&n.fun(t,e)}),this.postRend=function(){n.bc3d.positCam(n.visi3D._rotationX,n.visi3D._rotationZ)},this.visi3D.arrayDoRender.push(this.postRend),this.setFont=function(t){this.bc3d.setFont(t)},this.setMesh=function(t){this.bc3d.setMesh(t),this.visi3D.intRend=1},this.clear=function(){this.bc3d.clear(),this.visi3D.intRend=1},this.setEvent=function(t,e){this.bc3d.setEvent(t,e),this.visi3D.intRend=1},this.draw=function(){this.bc3d.draw(),this.visi3D.intRend=1},this.sizeWindow=function(t,e,i,s){this.visi3D.sizeWindow(t,e,i,s)},this.upDate=function(){this.visi3D.upDate()}}function h(t){var e=this;this.fun=t,this._width=100,this._height=100,this._pause=!1,this._color=12303291,this._color1=10066329,this._kolII=5,this._boolShadow=!0,this._boolBottom=!0,this._boolAllText=!1,this._sizeText=24,this._colorText=10066329,this._activMouse=!0,this._rotationZ=.3,this._rotationX=1,this._zume=800,this.resolution=2,this.contentHTML=document.createElement(\"div\"),this.contentHTML.style.position=\"fixed\",this.contentHTML.style.top=\"0px\",this.contentHTML.style.left=\"0px\",this.contentHTML.style.zIndex=-1,document.body.appendChild(this.contentHTML),this.bCView=new a(this.contentHTML,null,function(t,i){e.fun(t,i)}),this.creatBox=function(t){this.bCView.setEvent(\"creat\",t)},this.setFont=function(t){this.bCView.setFont(t)},this.setMesh=function(t){this.bCView.setMesh(t)},this.upDate=function(){this.bCView.upDate()},this.sizeWindow=function(t,e,i,s){this.contentHTML.style.top=t+\"px\",this.contentHTML.style.left=e+\"px\",this.bCView.sizeWindow(t,e,i,s)}}Object.defineProperties(n.prototype,{width:{set:function(t){this._width!=t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!=t&&(this._height=t,this.draw())},get:function(){return this._height}},depth:{set:function(t){this._depth!=t&&(this._depth=t,this.draw())},get:function(){return this._depth}},color:{set:function(t){if(this._color!=t){this._color=t;new THREE.Color(this._color);this.material.color=new THREE.Color(this._color)}},get:function(){return this._color}},life:{set:function(t){this._life!=t&&(this._life=t,1==this._life?(this.cont3d.add(this.cont3D),this.bc3d.glaf.visi3D.addChildMouse(this.boxCont)):(this.cont3d.remove(this.cont3D),this.bc3d.glaf.visi3D.removeChildMouse(this.boxCont)))},get:function(){return this._life}},active:{set:function(t){this._active!=t&&(this._active=t,this.textActiv())},get:function(){return this._active}},text:{set:function(t){this._text!=t&&(this._text=t,this.dragText())},get:function(){return this._text}},boolAllText:{set:function(t){this._boolAllText!=t&&(this._boolAllText=t,this.textActiv())},get:function(){return this._boolAllText}},sizeText:{set:function(t){this._sizeText!=t&&(this._sizeText=t,this.dragSazeText())},get:function(){return this._sizeText}}}),Object.defineProperties(r.prototype,{otstup:{set:function(t){this._otstup!=t&&(this._otstup=t,this.draw())},get:function(){return this._otstup}},index:{set:function(t){this._index=t,this.objDin=void 0;for(var e=0;e<this.array.length;e++)this.array[e].active=!1;null!=this.array[this._index]?(this.array[this._index].active=!0,this.objDin=this.array[this._index]):this._index=-1,this.fun(\"index\",this.objDin)},get:function(){return this._index}},width:{set:function(t){if(this._width!=t){this._width=t;for(var e=0;e<this.array.length;e++)this.array[e].width=this._width;this.draw()}},get:function(){return this._width}},height:{set:function(t){if(this._height!=t){this._height=t;for(var e=0;e<this.array.length;e++)this.array[e].height=this._height;this.draw()}},get:function(){return this._height}},kolII:{set:function(t){this._kolII!=t&&(this._kolII=t,this.draw())},get:function(){return this._kolII}},color:{set:function(t){this._color!=t&&(this._color=t,this.drawColor())},get:function(){return this._color}},color1:{set:function(t){this._color1!=t&&(this._color1=t,this.drawColor())},get:function(){return this._color1}},boolBottom:{set:function(t){this._boolBottom!=t&&(this._boolBottom=t,this.box.visible=t)},get:function(){return this._boolBottom}},boolAllText:{set:function(t){if(this._boolAllText!=t){this._boolAllText=t;for(var e=0;e<this.array.length;e++)this.array[e].boolAllText=this._boolAllText}},get:function(){return this._boolAllText}},sizeText:{set:function(t){if(this._sizeText!=t){this._sizeText=t;for(var e=0;e<this.array.length;e++)this.array[e].sizeText=this._sizeText}},get:function(){return this._sizeText}},colorText:{set:function(t){if(this._colorText!=t){this._colorText=t;var e=new THREE.Color(this._colorText);this.materialText.color=e}},get:function(){return this._colorText}},activMouse:{set:function(t){this._activMouse!=t&&(this._activMouse=t,this.glaf.visi3D.event3DArr.activ=t,trace(\"this.glaf.visi3D.event3DArr.activ   \",t))},get:function(){return this._activMouse}}}),Object.defineProperties(a.prototype,{otstup:{set:function(t){this.bc3d.otstup=t,this.visi3D.intRend=1},get:function(){return this.bc3d._otstup}},index:{set:function(t){this.bc3d.index=t,this.visi3D.intRend=1},get:function(){return this.bc3d.index}},width:{set:function(t){this.bc3d.width=t,this.visi3D.intRend=1},get:function(){return this.bc3d.width}},height:{set:function(t){this.bc3d.height=t,this.visi3D.intRend=1},get:function(){return this.bc3d.height}},kolII:{set:function(t){this.bc3d.kolII=t,this.visi3D.intRend=1},get:function(){return this.bc3d.kolII}},color:{set:function(t){this.bc3d.color=t,this.visi3D.intRend=1},get:function(){return this.bc3d.color}},color1:{set:function(t){this.bc3d.color1=t,this.visi3D.intRend=1},get:function(){return this.bc3d.color1}},boolShadow:{set:function(t){this._boolShadow!=t&&(this._boolShadow=t,this.visi3D.utility.sunActiv(t),this.visi3D.shadowNeedsUpdate=t,this.visi3D.intRend=1)},get:function(){return this._boolShadow}},boolBottom:{set:function(t){this.bc3d.boolBottom=t,this.visi3D.intRend=1},get:function(){return this.bc3d.boolBottom}},boolAllText:{set:function(t){this.bc3d.boolAllText=t,this.visi3D.intRend=1},get:function(){return this.bc3d.boolAllText}},sizeText:{set:function(t){this.bc3d.sizeText=t,this.visi3D.intRend=1},get:function(){return this.bc3d.sizeText}},colorText:{set:function(t){this.bc3d.colorText=t,this.visi3D.intRend=1},get:function(){return this.bc3d.colorText}},activMouse:{set:function(t){this.bc3d.activMouse=t,this.visi3D.intRend=1},get:function(){return this.bc3d.activMouse}}}),i.d(e,\"a\",function(){return h}),Object.defineProperties(h.prototype,{width:{set:function(t){this.bCView.width=t},get:function(){return this.bCView._width}},height:{set:function(t){this.bCView.height=t},get:function(){return this.bCView._height}},pause:{set:function(t){this.bCView.pause=t},get:function(){return this.bCView._pause}},color:{set:function(t){this.bCView.color=t},get:function(){return this.bCView._color}},color1:{set:function(t){this.bCView.color1=t},get:function(){return this.bCView._color1}},boolShadow:{set:function(t){this.bCView.boolShadow=t},get:function(){return this.bCView._boolShadow}},boolBottom:{set:function(t){this.bCView.boolBottom=t},get:function(){return this.bCView._boolBottom}},boolAllText:{set:function(t){this.bCView.boolAllText=t},get:function(){return this.bCView._boolAllText}},sizeText:{set:function(t){this.bCView.sizeText=t},get:function(){return this.bCView._sizeText}},colorText:{set:function(t){this.bCView.colorText=t},get:function(){return this.bCView._colorText}},activMouse:{set:function(t){this.bCView.activMouse=t},get:function(){return this.bCView._activMouse}},kolII:{set:function(t){this.bCView.kolII=t},get:function(){return this.bCView._kolII}},rotationZ:{set:function(t){this.bCView.visi3D.rotationZ=t},get:function(){return this.bCView.visi3D._rotationZ}},rotationX:{set:function(t){this.bCView.visi3D.rotationX=t},get:function(){return this.bCView.visi3D._rotationX}},zume:{set:function(t){this.bCView.visi3D.zume=t},get:function(){return this.bCView.visi3D._zume}}})},function(t,e,i){\"use strict\";function s(){var t=this,e=256,i=256,s=new THREE.Scene,n=new THREE.OrthographicCamera(e/-2,e/2,i/2,i/-2,.001,1e4),r=(new THREE.Clock,new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}));n.position.set(200,200,200),s.add(n),this.camera=n,this.fotoContainer=new THREE.Object3D,s.add(this.fotoContainer),s.background=new THREE.Color(38655),r.setPixelRatio(window.devicePixelRatio),r.setSize(e,i),r.localClippingEnabled=!0;var o=document.createElement(\"div\");o.style.position=\"absolute\",o.style.bottom=\"0px\",o.style.left=\"0px\",o.appendChild(r.domElement),this.contentHTML=o,this.canvas=r.domElement,this.contentHTML=o;var a=new THREE.AmbientLight(\"#ffffff\",1);s.add(a);var h=new THREE.GridHelper(1e3,10),c=new THREE.AxesHelper(100),d=new THREE.BoxHelper(this.fotoContainer,16776960);s.add(h),s.add(c),s.add(d);var l=[c,h,d];function u(){p(),d.setFromObject(t.fotoContainer)}function p(){r.render(s,n)}this.render=p,u();var f=new THREE.Box3,m=new THREE.Vector3;this.box=f,this.center=m,this.setSize=function(t,s){e=t,i=s,r.setSize(e,i),n.aspect=e/i,n.updateProjectionMatrix()},this.addObjFoto=function(t){this.fotoContainer.add(t),d.setFromObject(this.fotoContainer)},this.removeObjFoto=function(t){this.fotoContainer.remove(t)},this.moveToObj=function(e){f.setFromObject(e||t.fotoContainer);var i=f.max.x-f.min.x,s=f.max.z-f.min.z;t.moveToRect(f.min.x,f.min.z,i,s)},this.moveToRect=function(t,e,i,s){if(t+=i/2,e+=s/2,m.set(t,0,e),n.position.set(m.x,9e3,m.z),n.lookAt(m),v.target.set(m.x,m.y,m.z),\"OrthographicCamera\"===n.type){var r=Math.max(s,i);n.zoom=1,n.left=r/-2,n.right=r/2,n.top=r/2,n.bottom=r/-2,n.aspect=r/r}n.updateProjectionMatrix()},this.getFoto=function(t){t=t||1024;for(var n=0;n<l.length;n++)l[n].visible=!1;var o=s.background;s.background=null,r.setSize(t,t),p();var a=r.domElement.toDataURL(\"image/png\");r.setSize(e,i),s.background=o;for(var h=0;h<l.length;h++)l[h].visible=!0;return p(),a},this.getCanvas=function(t){t=t||1024;for(var e=0;e<l.length;e++)l[e].visible=!1;s.background;s.background=null;var i=r.getSize();return i.width==t&&i.height==t||r.setSize(t,t),p(),r.domElement};var v=new THREE.OrbitControls(n,o);v.enableKeys=!1,v.minDistance=1,v.minZoom=1,v.maxZoom=1,v.addEventListener(\"change\",function(){u()})}function n(t){var e=this,i=THREE.Math.generateUUID(),n=new THREE.Vector3(0,1,0),h=(new THREE.Plane(n,.01),new THREE.Vector4(0,999,0,.001)),c=new THREE.Box3,d=t||new s;this.foto3D=d;var l=new THREE.Vector2(0,0),u=100,p=new o;this.canvas=p.canvas,this.isTime=!1;var f=new THREE.Texture(p.canvas);this.texturePlan=f,this.matPlan=new THREE.MeshPhongMaterial({transparent:!0,side:THREE.DoubleSide,map:f});var m=new a;this.canvasGG=m,m.arrColorStopTranspanent[0]=.15,m.arrProcent[0]=.82,m.arrColorStopTranspanent[1]=1,m.arrProcent[1]=1,m.update();var v=new THREE.Texture(m.canvas);v.needsUpdate=!0,this.textureShadow=v,this.content3d=new THREE.Object3D,this.shadowContent3d=new THREE.Object3D,this.meshPlan=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),this.matPlan),this.meshPlan.rotation.x=-Math.PI/2,this.content3d.add(this.meshPlan);var g=new THREE.Mesh(new THREE.SphereBufferGeometry(10,16,16));g.position.set(h.x,h.y,h.z),this.arrShadowMesh=[],this.arrObj=[],this._dunamic=!0,this.dirty=!0,this._lightPosition4D=h,this._fotoPosition=new THREE.Vector2(0,0),this._fotoWH=150,this._imgWH=512,this._imgBlur=1,this._imgAlpha=1,this._offsetY=0,this._scaleShadow=1,this._isDinamFotoRect=!1,this._opacityMat=1;var _=[new THREE.Plane(new THREE.Vector3(0,-1,0),100),new THREE.Plane(new THREE.Vector3(0,1,0),0)];this._shadowMaterial=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,transparent:!0,opacity:this._opacityMat,depthWrite:!1,map:v,clippingPlanes:_,clipIntersection:!1}),this.arrDataSempl=[],this.arrDataSempl.push(new r(0,200,3,1));var b=new THREE.Group;this.content3d.add(b);var x=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:v,transparent:!0}));x.scale.set(1,30,1),x.rotation.z=-Math.PI/2,b.add(x),b.visible=!1,this.helpers=b,this.setConstMax=function(t){_[0].constant=t},this.setConstMin=function(t){_[1].constant=-t},this.addObj=function(t){if(-1==e.arrObj.indexOf(t)){t.updateMatrixWorld();var i=t.clone();!function t(e,i){e.userData.targetObject=i;for(var s=0;s<e.children.length;s++){if(!i.children[s])throw new Error(\"обекты не одинаковы\");t(e.children[s],i.children[s])}}(i,t),function(t){var i=[];!function t(e,i){\"Mesh\"==e.type&&i.push(e);for(var s=0;s<e.children.length;s++)\"Mesh\"==e.type?i.push(e.children[s]):t(e.children[s],i)}(t,i);for(var s=0;s<i.length;s++)i[s].material=e._shadowMaterial}(i),e.arrShadowMesh.push(i),e.arrObj.push(t),e.shadowContent3d.add(i),this.dirty=!0}},this.removeObj=function(t){var i=e.arrObj.indexOf(t);-1!=i&&(e.arrObj.splice(i,1),e.shadowContent3d.remove(e.arrShadowMesh[i]),e.arrShadowMesh.splice(i,1),this.dirty=!0)},this.clear=function(){for(var t=0;(t=e.arrObj.length)>0;)if(e.removeObj(e.arrObj[t-1]),t===e.arrObj.length)throw new Error(\"object not remove\")},this.intRend=1,this.intRendOk=1,this.upDate=function(){e.opacityMat&&(e.dunamic&&(e.intRend=e.intRendOk),e.intRend==e.intRendOk&&(e.dirty||function(){for(var t=0;t<e.arrShadowMesh.length;t++)if((e._isDinamFotoRect||w(e.arrShadowMesh[t]))&&E(e.arrShadowMesh[t]))return!0;return!1}())&&e.render(),e.intRend++)};function w(t){var i=!1,s=!1,n=c.min.x,r=c.min.z,o=c.max.x-c.min.x,a=c.max.z-c.min.z;if(c.setFromObject(t.userData.targetObject),i=P(n=c.min.x,r=c.min.z,o=c.max.x-c.min.x,a=c.max.z-c.min.z,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH),c.setFromObject(t),s=P(n=c.min.x,r=c.min.z,o=c.max.x-c.min.x,a=c.max.z-c.min.z,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH),!i&&!s)return!1;i=!1,s=!1;for(var h=0;h<t.children.length;h++)if(c.setFromObject(t.children[h].userData.targetObject),n=c.min.x,r=c.min.z,o=c.max.x-c.min.x,a=c.max.z-c.min.z,i=i||P(n,r,o,a,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH),c.setFromObject(t.children[h]),n=c.min.x,r=c.min.z,o=c.max.x-c.min.x,a=c.max.z-c.min.z,s=s||P(n,r,o,a,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH),i||s)return!0;return!0}function E(t){if(!function(t,e){if(t.position.equals(e.position)&&t.quaternion.equals(e.quaternion)&&t.scale.equals(e.scale)&&t.visible===e.visible)return!0;return!1}(t,t.userData.targetObject))return!0;for(var e=0;e<t.children.length;e++)if(E(t.children[e]))return!0;return!1}function y(t){!function(t,e){t.position.copy(e.position),t.quaternion.copy(e.quaternion),t.scale.copy(e.scale),t.visible=e.visible}(t,t.userData.targetObject);for(var e=0;e<t.children.length;e++)y(t.children[e])}this.render=function(){e.isTime&&console.time(\"render \"+i),e.dirty=!1,function(){h.w=.001,g.position.set(h.x,h.y,h.z);for(var t=0;t<e.arrShadowMesh.length;t++)y(e.arrShadowMesh[t]);S()}(),d.addObjFoto(e.shadowContent3d),u=e.fotoWH,l.x=e.fotoPosition.x,l.y=e.fotoPosition.y,e.isDinamFotoRect&&(c.setFromObject(e.shadowContent3d),l.x=c.min.x,l.y=c.min.z,u=Math.max(c.max.x-c.min.x,c.max.z-c.min.z),l.x-=100,l.y-=100,u+=200),d.moveToRect(l.x,l.y,u,u),function(){var t=d.getCanvas(e.imgWH);p.setCanvas(t),0==e.arrDataSempl.length&&p.update();for(var i=0;i<e.arrDataSempl.length;i++)e.setConstMin(e.arrDataSempl[i].min*e._scaleShadow+e._offsetY),e.setConstMax(e.arrDataSempl[i].max*e._scaleShadow+e._offsetY),d.render(),p._blur=e.arrDataSempl[i].blur+(e._scaleShadow>1?e._scaleShadow:0),p._alpha=e.arrDataSempl[i].alpha,p.update();e.setConstMin(-999999),e.setConstMax(999999),f.needsUpdate=!0}(),e.meshPlan.scale.set(u,u,1),e.meshPlan.position.set(l.x+u/2,0,l.y+u/2),e.isTime&&console.timeEnd(\"render \"+i),e.onUpdate&&e.onUpdate()};var R=new THREE.Box3(new THREE.Vector3,new THREE.Vector3(300,300,300));this.boundingBoxUv=R;var T=new THREE.Vector3;function D(t){if(\"Mesh\"===t.type){var i=!1,s=t.getWorldPosition(t.position),n=t.getWorldQuaternion(t.quaternion),r=e.maxHeight;s.y-=e._offsetY,t.userData.pos?t.userData.pos.y!=s.y?i=!0:t.userData.rot.equals(n)?t.userData.maxHeight!==r?i=!0:t.userData.scaleShadow!==e._scaleShadow&&(i=!0):i=!0:i=!0,e._isDinamFotoRect||(c.setFromObject(t),P(c.min.x,c.min.z,c.max.x-c.min.x,c.max.z-c.min.z,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH)||(i=!1)),i&&(!function(t){t.geometry.uuid===t.userData.targetObject.geometry.uuid&&(t.geometry=t.userData.targetObject.geometry.clone());var i=R,s=0;if(t.geometry instanceof THREE.Geometry){for(var n=t.geometry.faces,r=t.geometry.vertices,o=t.geometry.faceVertexUvs[0],a=0;a<n.length;a++)T.set(r[n[a].a].x,r[n[a].a].y,r[n[a].a].z),t.localToWorld(T),s=1-M(T.y-e._offsetY,i.min.y,i.min.y+i.max.y)/100,o[a][0].set(s,s),T.set(r[n[a].b].x,r[n[a].b].y,r[n[a].b].z),t.localToWorld(T),s=1-M(T.y-e._offsetY,i.min.y,i.min.y+i.max.y)/100,o[a][1].set(s,s),T.set(r[n[a].c].x,r[n[a].c].y,r[n[a].c].z),t.localToWorld(T),s=1-M(T.y-e._offsetY,i.min.y,i.min.y+i.max.y)/100,o[a][2].set(s,s);t.geometry.uvsNeedUpdate=!0}else{var h=t.geometry.attributes.position.array;t.geometry.attributes.uv||(arrUvAttribut=new Float32Array(h.length/3*2),t.geometry.addAttribute(\"uv\",new THREE.BufferAttribute(arrUvAttribut,2)));var c=t.geometry.attributes.uv.array,d=(t.geometry.attributes.uv.itemSize,t.geometry.index.array),l=t.geometry.index.count;for(a=0;a<l;a++){var u=d[a],p=3*u,f=2*u;T.set(h[p],h[p+1],h[p+2]),t.localToWorld(T),s=1-M(T.y-e._offsetY,i.min.y,i.min.y+i.max.y*e._scaleShadow)/100,c[f]=s,c[f+1]=s}t.geometry.attributes.uv.needsUpdate=!0}}(t),t.userData.pos=s,t.userData.rot=n,t.userData.maxHeight=r,t.userData.scaleShadow=e._scaleShadow)}for(var o=0;o<t.children.length;o++)D(t.children[o])}function S(){x.scale.x=(e.boundingBoxUv.max.y||1)*e._scaleShadow,x.position.y=x.scale.x/2+e.boundingBoxUv.min.y;for(var t=0;t<e.arrShadowMesh.length;t++)(e._isDinamFotoRect||(c.setFromObject(e.arrShadowMesh[t]),P(c.min.x,c.min.z,c.max.x-c.min.x,c.max.z-c.min.z,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH)))&&D(e.arrShadowMesh[t])}this.updateShadowUv=S,this.updateShadowTexture=function(){this.canvasGG.update(),this.textureShadow.needsUpdate=!0},this.setShadowColor=function(t,i,s){m.r=t,m.g=i,m.b=s,e.updateShadowTexture()},this.getConfig=function(){var t={};return t.imgWH=e.imgWH,t.fotoPosition={x:e._fotoPosition.x,y:e._fotoPosition.y},t.fotoWH=e.fotoWH,t.maxHeight=e.maxHeight,t.isDinamFotoRect=e.isDinamFotoRect,t.arrDataSempl=e.arrDataSempl,t.opacityMat=e.opacityMat,t.dunamic=e.dunamic,t.canvasGG={arrColorStopTranspanent:e.canvasGG.arrColorStopTranspanent,arrProcent:e.canvasGG.arrProcent},t},this.setConfig=function(t){e.canvasGG.arrColorStopTranspanent=t.canvasGG.arrColorStopTranspanent,e.canvasGG.arrProcent=t.canvasGG.arrProcent,e.fotoPosition.x=t.fotoPosition.x,e.fotoPosition.y=t.fotoPosition.y,e.fotoWH=t.fotoWH,e.isDinamFotoRect=t.isDinamFotoRect,e.arrDataSempl=t.arrDataSempl,e.opacityMat=t.opacityMat,e.imgWH=t.imgWH,e.dunamic=t.dunamic,e.updateShadowTexture(),e.maxHeight=t.maxHeight};var H={imgWH:1024,fotoPosition:{x:0,y:0},fotoWH:150,maxHeight:300,isDinamFotoRect:!1,arrDataSempl:[{min:0,max:6,blur:.8,alpha:.25},{min:4,max:15,blur:3,alpha:.64},{min:10,max:23,blur:4,alpha:.5},{min:15,max:50,blur:15,alpha:1},{min:20,max:198.09,blur:15,alpha:.7},{min:0,max:2,blur:1.02,alpha:1}],opacityMat:1,dunamic:!0,canvasGG:{arrColorStopTranspanent:[0,1,.25],arrProcent:[.4,1,.96]}};function P(t,e,i,s,n,r,o,a){return t<n+o&&e<r+a&&t+i>n&&e+s>r}function M(t,e,i,s){return e=null!=e?e:0,i=null!=i?i:100,s=s||100,isNaN(parseFloat(t))&&(t=e),t<e&&(t=e),t>i&&(t=i),t=Math.round(t*s)/s,e<0?100*(Math.abs(e)+t)/(Math.abs(e)+Math.abs(i)||1):100*(Math.abs(e)-t)/(Math.abs(e)-Math.abs(i)||1)}this.sss=H,this.setConfig(H),this.getBase64=function(){return e.render(),p.canvas.toDataURL()},this.debug=!1}function r(t,e,i,s){this.min=t||0,this.max=e||1,this.blur=i||0,this.alpha=s||1}function o(){var t=this,e=document.createElement(\"canvas\");this.canvas=e,e.width=256,e.height=256;var i=e.getContext(\"2d\"),s=new Image;this.b64=null,this._blur=0,this._blur1=1,this._alpha=1,this.image=new Image,this.setBase64=function(i,n){this.b64=i,(s=new Image).onload=function(){e.clearRect(0,0,e.width,e.height),e.width=s.width,e.height=s.height,t.update(),n&&n(e.toDataURL())},s.src=i},this.setCanvas=function(t){s=t,e.width=t.width,e.height=t.height},this.update=function(){i.filter=\"blur(\"+t._blur+\"px)\",i.globalAlpha=t._alpha,i.drawImage(s,0,0)}}function a(){var t=this,e=document.createElement(\"canvas\");e.width=e.height=256,this.canvas=e;var i=e.getContext(\"2d\");this._blur=0,this._alpha=1,this.arrColorStopTranspanent=[0,1],this.arrProcent=[0,1],this.position=new THREE.Vector2,this.position1=new THREE.Vector2(1,0),this.r=0,this.g=0,this.b=0,this.update=function(){var s=e.width,n=e.height;i.clearRect(0,0,s,n),i.rect(0,0,s,n),i.filter=\"blur(\"+t._blur+\"px)\",i.globalAlpha=t._alpha;for(var r=t.position.x*s,o=t.position.y*n,a=t.position1.x*s,h=t.position1.y*n,c=i.createLinearGradient(r,o,a,h),d=0;d<t.arrColorStopTranspanent.length;d++)c.addColorStop(t.arrProcent[d],\"rgba(\"+t.r+\",\"+t.g+\",\"+t.b+\",\"+t.arrColorStopTranspanent[d]+\")\");i.fillStyle=c,i.fill()},this.update()}function h(t){this.parent=t;this._active=!1,this._visible=!0,this.WH=512,this._wn=this.WH,this._obj3d=void 0,this.smc=void 0,this.init=function(){null==this.smc&&(this.smc=new n,this.smc.fotoPosition.set(-this._wn/2,-this._wn/2),this.smc.fotoWH=this._wn,this.smc.content3d.rotation.x=-Math.PI/2,this.smc.content3d.position.y=-1,this.smc.content3d.visible=this._visible,this.dergObj())},this.dergActiv=function(){1==this._active?null==this.smc.content3d.parent&&this.parent.parent.groupObject.add(this.smc.content3d):null!=this.smc.content3d.parent&&this.parent.parent.groupObject.remove(this.smc.content3d)},this.render=function(){null!=this.smc&&null!=this.smc.content3d.parent&&this.smc.upDate()},this.dergObj=function(){null!=this.smc&&(null!=this._obj3d?this.smc.arrObj[0]==this._obj3d||(this.smc.clear(),this.smc.addObj(this._obj3d)):this.smc.clear())}}Object.defineProperties(n.prototype,{scaleShadow:{set:function(t){this.dirty=!0,this._scaleShadow=t},get:function(){return this._scaleShadow}},debug:{set:function(t){this.helpers.visible=t},get:function(){return this.helpers.visible}},offsetY:{set:function(t){this._offsetY=t,this.dirty=!0},get:function(){return this._offsetY}},maxHeight:{set:function(t){this.dirty=!0,this.boundingBoxUv.max.y=t,this.updateShadowUv()},get:function(){return this.boundingBoxUv.max.y}},dunamic:{set:function(t){this.dirty=!0,this._dunamic=t},get:function(){return this._dunamic}},fotoPosition:{set:function(t){this.dirty=!0,this._fotoPosition=t},get:function(){return this._fotoPosition}},fotoWH:{set:function(t){this.dirty=!0,this._fotoWH=t},get:function(){return this._fotoWH}},imgWH:{set:function(t){this.dirty=!0,this._imgWH=t},get:function(){return this._imgWH}},imgBlur:{set:function(t){this.dirty=!0,this._imgBlur=t},get:function(){return this.dirty=!0,this._imgBlur}},imgAlpha:{set:function(t){this.dirty=!0,this._imgAlpha=t},get:function(){return this._imgAlpha}},isDinamFotoRect:{set:function(t){this.dirty=!0,this._isDinamFotoRect=t},get:function(){return this._isDinamFotoRect}},opacityMat:{set:function(t){this.dirty=!0,this._opacityMat=t,this.matPlan.opacity=this._opacityMat},get:function(){return this._opacityMat}},shadowMaterial:{set:function(t){if(t!==this._shadowMaterial){this._shadowMaterial=t;for(var e=0;e<this.arrShadowMesh.length;e++)if(this.arrShadowMesh[e]instanceof THREE.ShadowMesh)this.arrShadowMesh[e].material=this._shadowMaterial;else for(var i=0;i<this.arrShadowMesh[e].children.length;i++)this.arrShadowMesh[e].children[i]instanceof THREE.ShadowMesh&&(this.arrShadowMesh[e].children[i].material=this._shadowMaterial)}},get:function(){return this._shadowMaterial}},lightPosition4D:{set:function(t){this._lightPosition4D.set(t.x,t.y,t.z,.001)},get:function(){return this._lightPosition4D}}}),Object.defineProperties(o.prototype,{blur:{set:function(t){this._blur=t},get:function(){return this._blur}},alpha:{set:function(t){this._alpha=t},get:function(){return this._alpha}}}),Object.defineProperties(a.prototype,{}),i.d(e,\"a\",function(){return h}),h.prototype={set active(t){this._active!==t&&(this._active=t,this.init(),this.dergActiv())},get active(){return this._active},set visible(t){this._visible!==t&&(this._visible=t,null!=this.smc&&(this.smc.content3d.visible=t))},get visible(){return this._visible},set obj3d(t){this._obj3d!==t&&(this._obj3d=t,this.dergObj())},get obj3d(){return this._obj3d},set wh(t){this._wh!==t&&(this._wh=t,null!=this.smc&&(this.smc.fotoPosition.set(-this._wn/2,-this._wn/2),this.smc.fotoWH=this._wn))},get wh(){return this._wh}}},function(t,e,i){\"use strict\";var s=i(1),n=i(3);function r(t){var e=this;this.visi3D=t,this.box3=new THREE.Box3,this.rectScreen=new THREE.Vector2,this.world=new THREE.Vector2(0,0,100,100),this.targetObject=null,this.arrPoint=[],this.isMoveCam=!1,this.isFromGeometry=!1,this._offset=0,this._active=!0,this._debug=!1;var i=new THREE.Vector2,s=new THREE.Vector2,n=new THREE.Vector3;function r(){e.zumeVisi3D(),i.set(e.world.x+e.world.width/2,e.world.y+e.world.height/2),s.set(e.rectScreen.x+e.rectScreen.width/2,e.rectScreen.y+e.rectScreen.height/2),i.sub(s).divideScalar(2)}this.upDate=function(){if(e.active&&(this.updateBound3d(),!e.box3.isEmpty())){if(trace(n),this.visi3D.xVerh=n.x,this.visi3D.zVerh=n.z,this.visi3D.yVerh=-n.y,e.zumeVisi3D(),e.isMoveCam){r();for(var t=0;i.length()>2&&++t<10;)this.visi3D.position3d.moveCamXY(i),r()}e.debugFocus&&e.debugFocus.upDate()}},this.zumeVisi3D=function(){for(var t,i,s=0,n=6e4,r=0;s<n&&!(++r>20)&&(i=t=(s+n)/2,e.visi3D.zume=i,!(Math.abs(s-t)<.01||Math.abs(n-t)<.01||t<.01));)e.updateRectScreen(),e.isZoomIn()?n=t:s=t+1},this.updateBound3d=function(){if(e.box3.makeEmpty(),e.targetObject)e.box3.copy(e.getCompoundBoundingBox(e.targetObject));else for(var t=0;t<e.arrPoint.length;t++)e.box3.expandByPoint(e.arrPoint[t]);e.box3.getCenter(n)},this.updateRectScreen=function(){if(this.visi3D.camera.updateMatrixWorld(),this.visi3D.scene.updateMatrixWorld(),e.targetObject&&e.isFromGeometry){var t=e.getBoxObject(e.targetObject);e.box3.copy(t.box3),e.box3.getCenter(n),e.setRectFromBox(e.rectScreen,t.box2)}else e.setRectFromBox(e.rectScreen,e.boxToScreen(e.box3));e.updateWorldSize()},this.setRectFromBox=function(t,e){t.x=e.min.x,t.y=e.min.y,t.width=e.max.x-e.min.x,t.height=e.max.y-e.min.y},this.getCompoundBoundingBox=function(){var t=new THREE.Box3,e=new THREE.Box3;function i(i){var s=i.geometry;void 0!==s&&(s.boundingBox||s.computeBoundingBox(),e.copy(s.boundingBox),e.applyMatrix4(i.matrixWorld),t.union(e))}return function(e){return e.updateMatrixWorld(!0),t.makeEmpty(),e.traverseVisible(i),t}}(),this.boxToScreen=function(){for(var t=new THREE.Box2,i=[],s=0;s<8;s++)i[s]=new THREE.Vector3;return function(s){t.makeEmpty(),i[0].set(s.min.x,s.min.y,s.min.z),i[1].set(s.min.x,s.max.y,s.min.z),i[2].set(s.max.x,s.min.y,s.min.z),i[3].set(s.max.x,s.max.y,s.min.z),i[4].set(s.min.x,s.min.y,s.max.z),i[5].set(s.min.x,s.max.y,s.max.z),i[6].set(s.max.x,s.min.y,s.max.z),i[7].set(s.max.x,s.max.y,s.max.z);for(var n=0;n<i.length;n++)t.expandByPoint(e.toScreenXY(i[n]));return t}}(),this.getBoxObject=function(){var t,i,s=new THREE.Box2,n=new THREE.Box3,r={box2:s,box3:n},o=new THREE.Vector3;function a(r){var a=r.geometry;if(void 0!==a)if(a.isGeometry){var h=a.vertices;for(t=0,i=h.length;t<i;t++)o.copy(h[t]).applyMatrix4(r.matrixWorld),n.expandByPoint(o),s.expandByPoint(e.toScreenXY(o))}else if(a.isBufferGeometry){var c=a.attributes.position;if(void 0!==c)for(t=0,i=c.count;t<i;t++)o.fromBufferAttribute(c,t).applyMatrix4(r.matrixWorld),n.expandByPoint(o),s.expandByPoint(e.toScreenXY(o))}}return function(t){return t.updateMatrixWorld(!0),s.makeEmpty(),n.makeEmpty(),t.traverseVisible(a),r}}();var o=new THREE.Vector2,a=new THREE.Vector3;this.toScreenXY=function(t){return a.copy(t),a.project(e.visi3D.camera),o.x=Math.round((a.x+1)*e.visi3D._width/2),o.y=Math.round((1-a.y)*e.visi3D._height/2),o},this.updateWorldSize=function(){e.world.x=e.offset,e.world.y=e.offset,e.world.width=this.visi3D._width-2*e.offset,e.world.height=this.visi3D._height-2*e.offset},this.isZoomIn=function(){return e.rectScreen.x>e.world.x&&e.rectScreen.x+e.rectScreen.width<e.world.x+e.world.width&&e.rectScreen.y>e.world.y&&e.rectScreen.y+e.rectScreen.height<e.world.y+e.world.height}}function o(t){var e=this;this.mFocus=t;var i=t.visi3D.scene,s=main.stage,n=new BoxHelper(1,materialAlphaRed);i.add(n);var r=new PIXI.Graphics;r.hitArea=new PIXI.Rectangle(0,0,0,0),s.addChild(r),e.active=!1,n.visible=r.visible=e.active,this.upDate=function(){n.visible=r.visible=e.active,e.active&&(r.clear(),r.position.set(t.visi3D._x,t.visi3D._y),r.lineStyle(1,0,1),r.drawRect(t.world.x,t.world.y,t.world.width,t.world.height),r.lineStyle(1,16711680,1),r.drawRect(t.rectScreen.x,t.rectScreen.y,t.rectScreen.width,t.rectScreen.height),n.width=t.box3.max.x-t.box3.min.x,n.depth=t.box3.max.y-t.box3.min.y,n.height=t.box3.max.z-t.box3.min.z,t.box3.getCenter(n.position))}}function a(t){var e=this;this.parent=t,this._debug=!1,this.debugInit=!1,this.shadowHelper=void 0,this.spotLightHelper=void 0,this.gridHelper=void 0,this.FIXATION=!1,this.ROTATION_X=0,this.ROTATION_Z=0,this.DISTANCE=this.parent.DISTANCE,this.CUB_HEIGHT=this.parent.CUB_HEIGHT,this.CUB_WIDTH=this.parent.CUB_WIDTH,this.SKY_X=0,this.SKY_Y=0,this.SKY_Z=0,this._fixation=this.FIXATION,this._rotationX=this.ROTATION_X,this._rotationZ=this.ROTATION_Z,this._distance=this.DISTANCE,this._cubHeight=this.CUB_HEIGHT,this._cubWidth=this.CUB_WIDTH,this.sky=new s.a(this),this.smc=new n.a(this),this.focus=new r(this.parent),this.funDebug=function(){1!=this.debugInit&&(this.debugInit=!0,this.plane=new THREE.Mesh(new THREE.PlaneBufferGeometry(1e3,1e3).rotateX(-Math.PI),new THREE.MeshLambertMaterial({color:new THREE.Color(11316396)})),this.plane.castShadow=this.plane.receiveShadow=!0,this.gridHelper=new THREE.GridHelper(1e3,10),this.gridHelper.rotation.x=-Math.PI/2,this.shadowHelper=new THREE.CameraHelper(this.parent.sunLight.shadow.camera),this.parent.sunLight&&(this.spotLightHelper=new THREE.DirectionalLightHelper(this.parent.sunLight))),1==this._debug?(null==this.gridHelper.parent&&this.parent.groupObject.add(this.gridHelper),null==this.plane.parent&&this.parent.groupObject.add(this.plane),null==this.shadowHelper.parent&&this.parent.scene.add(this.shadowHelper),this.parent.sunLight&&(null!=this.parent.sunLight.parent||(null!=this.spotLightHelper.parent&&this.parent.scene.remove(this.spotLightHelper),null!=this.shadowHelper.parent&&this.parent.scene.remove(this.shadowHelper)))):(null!=this.gridHelper.parent&&this.parent.groupObject.remove(this.gridHelper),null!=this.plane.parent&&this.parent.groupObject.remove(this.plane),null!=this.shadowHelper.parent&&this.parent.scene.remove(this.shadowHelper),this.parent.sunLight&&null!=this.spotLightHelper.parent&&this.parent.scene.remove(this.spotLightHelper))},this.render=function(){1==this._debug&&null!=this.spotLightHelper&&this.spotLightHelper.update(),this.smc.render(),this.sky.render(),this.focus.upDate(),this.dragSunLight()};var i=0;this.dragSunLight=function(){var t;null!=this.parent.sunLight&&(null!=this.parent.sunLight.parent&&(!0===e._fixation?(i=this._distance+2*this._cubHeight,e.parent.sunLight.position.set(0,i,0),e.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(1,0,0),e._rotationX),e.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(0,1,0),e._rotationZ-e.parent._rotationZ)):(i=this._distance+this._cubHeight,this.parent.sunLight.position.set(0,i,0),this.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(1,0,0),this._rotationX),this.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(0,1,0),this._rotationZ),this.parent.staticShadow&&(t=new THREE.Vector3(e.parent.xVerh,e.parent.yVerh,e.parent.zVerh),e.parent.sunLight.position.add(t),e.parent.sunLight.target.position.copy(t),o.distanceTo(t)>e.distanceUpdateShadow&&(o.copy(t),e.parent.shadowNeedsUpdate=!0)))))};var o=new THREE.Vector3;this.distanceUpdateShadow=500,this.dragSunLight2=function(){null!=this.parent.sunLight&&null!=this.parent.sunLight.parent&&(!0===this._fixation||(i=this._distance+2*this._cubHeight,this.parent.sunLight.position.set(0,i,0),this.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(1,0,0),this._rotationX),this.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(0,1,0),this._rotationZ)))},this.dragSunLight3=function(){this.parent.sunLight&&(this.parent.sunLight.shadow.camera.near=0+this._cubHeight,this.parent.sunLight.shadow.camera.far=2*this._cubHeight+this._cubHeight,this.parent.sunLight.shadow.camera.updateProjectionMatrix(),this.shadowHelper&&this.shadowHelper.update())},this.sunActiv=function(t){this.parent.objShadow(this.parent.group,t),1==t?null==this.parent.sunLight.parent&&(this.parent.scene.add(this.parent.sunLight),this.parent.scene.add(e.parent.sunLight.target)):null!=this.parent.sunLight.parent&&(this.parent.scene.remove(this.parent.sunLight),this.parent.scene.remove(e.parent.sunLight.target)),this.funDebug()},this.ambientActiv=function(t){1==t?null==this.parent.ambientLight.parent&&this.parent.scene.add(this.parent.ambientLight):null!=this.parent.ambientLight.parent&&this.parent.scene.remove(this.parent.ambientLight)}}r.prototype={set offset(t){this._offset=t||0},get offset(){return this._offset},set debug(t){this._debug=t,t&&!this.debugFocus&&(this.debugFocus=new o(this)),this.debugFocus&&(this.debugFocus.active=t)},get debug(){return this._debug},set active(t){this._active=t,t||(this.debug=!1)},get active(){return this._active}},i.d(e,\"a\",function(){return a}),a.prototype={set debug(t){this._debug!==t&&(this._debug=t,this.funDebug())},get debug(){return this._debug},set rotationX(t){this._rotationX!==t&&(this._rotationX=t,null!=this.spotLightHelper&&(this.parent.sunLight.shadow.camera.updateProjectionMatrix(),this.spotLightHelper.update()),this.dragSunLight2())},get rotationX(){return this._rotationX},set rotationZ(t){this._rotationZ!==t&&(this._rotationZ=t,this.sky.shadRotZ=t,null!=this.spotLightHelper&&this.spotLightHelper.update(),this.dragSunLight2())},get rotationZ(){return this._rotationZ},set fixation(t){this._fixation!==t&&(this._fixation=t,this.dragSunLight2())},get fixation(){return this._fixation},set distance(t){this._distance!==t&&(this._distance=t,this.dragSunLight3(),this.dragSunLight2())},get distance(){return this._distance},set cubHeight(t){this._cubHeight!==t&&(this._cubHeight=t,this.dragSunLight3(),this.dragSunLight2())},get cubHeight(){return this._cubHeight},set cubWidth(t){this._cubWidth!==t&&(this._cubWidth=t,this.parent.sunLight&&(this.parent.sunLight.shadow.camera.right=this._cubWidth,this.parent.sunLight.shadow.camera.left=-this._cubWidth,this.parent.sunLight.shadow.camera.top=this._cubWidth,this.parent.sunLight.shadow.camera.bottom=-this._cubWidth,this.parent.sunLight.shadow.camera.updateProjectionMatrix(),this.shadowHelper&&this.shadowHelper.update()))},get cubWidth(){return this._cubWidth}}},function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",function(){return MVisi3D});var _MEffectArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_MPosition3d_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_MEvent3DArr_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_MUtility_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4);function MVisi3D(_contentHTML,_content2d,_devas,_directional,_efect,_event3DArr,_alpha){var self=this;_devas=void 0!==_devas&&_devas,_directional=void 0===_directional||_directional,_efect=void 0===_efect||_efect,_event3DArr=void 0===_event3DArr||_event3DArr,_alpha=void 0!==_alpha&&_alpha,this.devas=_devas,this.contentHTML=_contentHTML,this.arrSetiScene=[],this._xVerh=0,this._yVerh=0,this._zVerh=0,this._rotationX=0,this._rotationZ=0,this._zume=1e3,this._arrOut=[],this._x=0,this._y=0,this._height=100,this._width=100,this.yes3d=!0,this.intRendOk=1,this._visible=!0,this._isDragPan=!1,this._activMouse=!0,this._staticShadow=!1,this.alwaysRender=!1,this.AMBIEN_COLOR=\"#ffffff\",this.AMBIEN_INTENSITY=.79,this.LIGHT_COLOR=\"#ffffff\",this.LIGHT_BIAS=-.001,this.SHADOW_INTENSITY=.22,this.SHADOW_RADIUS=1,this.SHADOW_WH=4096,this.DISTANCE=0,this.CUB_HEIGHT=500,this.CUB_WIDTH=500,this.FOV=45,this.FAR=45e3,this.content=void 0,this.graphics=void 0,null!=_content2d&&(this.content=eval(\"new PIXI.Container()\"),this.graphics=eval(\"new PIXI.Graphics()\"),_content2d.addChild(this.content),this.content.addChild(this.graphics),this.graphics.interactive=!0),this.camera,this.scene=new THREE.Scene;var color=13421772;this.camera=new THREE.PerspectiveCamera(this.FOV,this._width/this._height,1,this.FAR),1==this.devas?(this.renderer=new THREE.WebGLRenderer,this.renderer.setSize(this._width,this._height),this.renderer.setClearColor(color,1)):(this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:_alpha}),this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this._width,this._height),1==_alpha?this.renderer.setClearColor(color,0):this.renderer.setClearColor(color,1)),this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.efect,1==_efect&&(this.efect=new _MEffectArray_js__WEBPACK_IMPORTED_MODULE_0__.a(this,[]),this.efect.init()),this.event3DArr,1==_event3DArr&&(this.event3DArr=new _MEvent3DArr_js__WEBPACK_IMPORTED_MODULE_2__.a(this,this.camera,this.renderer.domElement),this.scene.event3DArr=this.event3DArr,this.event3DArr.addDragEvent(this.graphics),this.event3DArr.activ=this._activMouse),this.camera.position.set(0,0,-60),this.camera.rotation.set(Math.PI,0,0),_contentHTML.appendChild(this.renderer.domElement),this.renderer.domElement.style.zIndex=-1,this.renderer.domElement.style.position=\"fixed\",this.renderer.domElement.style.top=\"0px\",this.renderer.domElement.style.left=\"0px\",this.group=new THREE.Object3D,this.group.rotation.x=Math.PI/2,this.scene.add(this.group),this.group1=new THREE.Object3D,this.group.add(this.group1),this.group2=new THREE.Object3D,this.group1.add(this.group2),this.groupObject=new THREE.Object3D,this.group2.add(this.groupObject),this.group3d=new THREE.Object3D,this.groupObject.add(this.group3d),this.gCGG=new THREE.Object3D,this.group.add(this.gCGG),this.gCAngel=new THREE.Object3D,this.gCGG.add(this.gCAngel),this.gCam1=new THREE.Object3D,this.gCAngel.add(this.gCam1),this.gCam2=new THREE.Object3D,this.gCam1.add(this.gCam2),this.ggCam=new THREE.Object3D,this.gCam2.add(this.ggCam),this.ggCam.add(this.camera),this.ggCam.position.z=-this._zume,this.camera.position.z=0,this.axesHelper=new THREE.AxesHelper(100),this.scene.add(this.axesHelper),this.axesHelper.visible=!1,this.arrPoint=[];var disLig=4e3,powerLig=.4,dis=1e4,bbbbbb;if(this.sunLight,this.ambientLight=new THREE.AmbientLight(this.AMBIEN_COLOR,this.AMBIEN_INTENSITY),this.scene.add(this.ambientLight),this.ambientLight.castShadow=!1,1==_directional){var sunIntensity=this.SHADOW_INTENSITY;this.sunLight=new THREE.DirectionalLight(this.LIGHT_COLOR,sunIntensity,0,0,.2),this.sunLight.position.set(0,this.DISTANCE+2*this.CUB_HEIGHT,0),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.near=this.CUB_HEIGHT,this.sunLight.shadow.camera.far=this.CUB_HEIGHT+2*this.CUB_HEIGHT,this.sunLight.shadow.camera.right=this.CUB_WIDTH,this.sunLight.shadow.camera.left=-this.CUB_WIDTH,this.sunLight.shadow.camera.top=this.CUB_WIDTH,this.sunLight.shadow.camera.bottom=-this.CUB_WIDTH,this.sunLight.shadow.mapSize.width=this.SHADOW_WH,this.sunLight.shadow.mapSize.height=this.SHADOW_WH,this.sunLight.shadow.bias=this.LIGHT_BIAS,this.sunLight.shadow.radius=this.SHADOW_RADIUS}this.initOut=function(){},this.position3d=new _MPosition3d_js__WEBPACK_IMPORTED_MODULE_1__.a(self,this.graphics),this.utility=new _MUtility_js__WEBPACK_IMPORTED_MODULE_3__.a(self),this.arrayDoRender=[],this.shadowNeedsUpdate=!1,this.render=function(){if(0!=this.yes3d&&(this.utility.render(),this.intRend=10,this.shadowNeedsUpdate&&(this.shadowNeedsUpdate=!1,this.renderer.shadowMap.needsUpdate=!0),this.efect?0==this.efect.render()&&this.renderer.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera),0!=this.arrayDoRender.length))for(var t=0;t<this.arrayDoRender.length;t++)this.arrayDoRender[t]()},this.upDate=function(){(this.alwaysRender||this.intRend==this.intRendOk)&&this.render(),this.intRend<10&&this.intRend++},this.renderer.render(this.scene,this.camera),this.sizeWindow=function(t,e,i,s){null!=t&&(this._x=t),null!=e&&(this._y=e),null!=s&&(this._height=s),null!=i&&(this._width=i),null!=this.content&&(this.content.x=this._x,this.content.y=this._y,this.graphics.clear(),this.graphics.beginFill(16711680,0),this.graphics.drawRect(0,0,this._width,this._height),this.graphics.endFill()),this.renderer.domElement.style.left=this._x+\"px\",this.renderer.domElement.style.top=this._y+\"px\",this.camera.aspect=this._width/this._height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this._width,this._height),this.intRend=1,this.event3DArr&&(this.event3DArr.sizeWindow(this._width,this._height),this.event3DArr.setRect(this._x,this._y,this._width,this._height)),this.efect&&this.efect.sizeWindow(this._width,this._height)},this.render(),this.sizeWindow(),this.objShadow=function(t,e){if(1!=this.devas.devas)if(0!=this.devas.webGL){if(null==e&&(e=!0),bbbbbb=!0,t.material&&1==t.material.transparent&&t.material.opacity<1&&(bbbbbb=!1),1==bbbbbb&&(t.castShadow=e,t.receiveShadow=e),null!=t.children)for(var i=0;i<t.children.length;i++)null!=t.children?this.objShadow(t.children[i],e):(bbbbbb=!0,t.children[i].material&&1==t.material.transparent&&t.material.opacity<1&&(bbbbbb=!1),1==bbbbbb&&(t.children[i].castShadow=e,t.children[i].receiveShadow=e))}else e=!1;else e=!1},this.addEvent=function(t,e){this.event3DArr&&this.event3DArr.eventSob.addEvent(t,e)},this.removeEvent=function(t,e){this.event3DArr&&this.event3DArr.eventSob.removeEvent(t,e)},this.addChildMouse=function(t){this.event3DArr&&this.event3DArr.addChild(t)},this.removeChildMouse=function(t){this.event3DArr&&this.event3DArr.removeChild(t)}}MVisi3D.prototype={set staticShadow(t){this.renderer.shadowMap.autoUpdate=!t,this._staticShadow=t},get staticShadow(){return this._staticShadow},set rotationX(t){this._rotationX!==t&&(this._rotationX=t,this.intRend=1,this.gCam2.rotation.x=t)},get rotationX(){return this._rotationX},set rotationZ(t){this._rotationZ!==t&&(this._rotationZ=t,this.gCam1.rotation.z=t,this.intRend=1)},get rotationZ(){return this._rotationZ},set zume(t){this._zume!==t&&(this._zume=t,this.ggCam.position.z=-t,this.camera.position.z=0,this.intRend=1)},get zume(){return this._zume},set yVerh(t){this._yVerh=t,this.gCGG.position.z=t,this.intRend=1},get yVerh(){return this.gCGG.position.z},set xVerh(t){this._xVerh=t,this.gCGG.position.x=t,this.intRend=1},get xVerh(){return this.gCGG.position.x},set zVerh(t){this._zVerh=t,this.gCGG.position.y=t,this.intRend=1},get zVerh(){return this.gCGG.position.y},set arrOut(t){this._arrOut=t,this.efect.setValue(\"outline\",null,this._arrOut),this.intRend=1},get arrOut(){return this._arrOut},set x(t){this._x=t,this.sizeWindow()},get x(){return this._x},set y(t){this._y=t,this.sizeWindow()},get y(){return this._y},set height(t){this._height=t,this.sizeWindow()},get height(){return this._height},set width(t){this._width=t,this.sizeWindow()},get width(){return this._width},set visible(t){this._visible=t,this.content.visible=t,this.renderer.domElement.style.visibility=t?\"visible\":\"hidden\"},get visible(){return this._visible},set isDragPan(t){this._isDragPan=t,this.position3d.isDragPan=t},get isDragPan(){return this._isDragPan},set activMouse(t){this._activMouse=t,this.event3DArr&&(this.event3DArr.activ=this._activMouse)},get activMouse(){return this._activMouse},set minZum(t){this.position3d.minZum=t},get minZum(){return this.position3d.minZum},set maxZum(t){this.position3d.maxZum=t},get maxZum(){return this.position3d.maxZum},set maxRotationX(t){this.position3d.minMaxX.x=t},get maxRotationX(){return this.position3d.minMaxX.x},set minRotationX(t){t<this.rotationX&&(this.rotationX=t),this.position3d.minMaxX.y=t},get minRotationX(){return this.position3d.minMaxX.y}}},function(t,e,i){\"use strict\";function s(t){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function n(t,e){var i=this;this.visi3D=t,this._startArray=[],this._width=t._width,this._height=t._height,this.scene=this.visi3D.scene,this.camera=this.visi3D.camera,this.renderer=this.visi3D.renderer,this.composer=new THREE.EffectComposer(this.renderer),this.RENDER_PASS=!1,this.OUTLINE_PASS=!1,this.OUTLINE_COLOR=\"#0000ff\",this.OUTLINE_COLOR1=\"#ff0000\",this.STRJSON='{\"edgeGlow\":0,\"usePatternTexture\":false,\"edgeThickness\":1,\"edgeStrength\":3,\"downSampleRatio\":2,\"pulsePeriod\":0}',this.SAOJSON='{\"saoBlur\":true,\"output\":0,\"saoBias\":0,\"saoBlurDepthCutoff\":0,\"saoBlurRadius\":8,\"saoBlurStdDev\":4,\"saoIntensity\":0.18,\"saoKernelRadius\":100,\"saoMinResolution\":0,\"saoScale\":11.58}',this.TAA_PASS=!1,this.SAMPLE_LEVEL=0,this.STEREO_PASS=!1,this.SHADER_PASS=!1,this.SAO_PASS=!1,this.SSAO_PASS=!1,this._renderPass=this.RENDER_PASS,this._outlinePass=this.OUTLINE_PASS,this._outlineColor=this.OUTLINE_COLOR,this._outlineColor1=this.OUTLINE_COLOR1,this._strJSON=this.STRJSON,this._taaPass=this.TAA_PASS,this._sampleLevel=this.SAMPLE_LEVEL,this._stereoPass=this.STEREO_PASS,this._shaderPass=this.SHADER_PASS,this._saoPass=this.SAO_PASS,this._saoJSON=this.SAOJSON,this.jsonCheck=function(t){if(null==t)return!1;if(\"string\"!=typeof t)return!1;if(-1==t.indexOf('\":'))return!1;if(-1==t.indexOf(\"}\"))return!1;if(\"null\"===t)return!1;try{JSON.parse(t)}catch(t){return!1}return!0},this.setObjInObj=function(t,e){if(0!=this.jsonCheck(e)){var i=JSON.parse(e);for(var n in i)for(var r in t)r==n&&(\"object\"==s(i[r])?this.setObjInObj(t[r],i[r]):t[r]=i[r])}},this.array=[],this.object={},this.init=function(){if(0==this.array.length){var t=0;this.array[t]=new r(new THREE.RenderPass(this.scene,this.camera)),this.array[t].type=\"RenderPass\",t++,this.array[t]=new r(new THREE.OutlinePass(new THREE.Vector2(this._width,this._height),this.scene,this.camera)),this.array[t].type=\"OutlinePass\",this.array[t].effect.visibleEdgeColor=new THREE.Color(this._outlineColor),this.array[t].effect.hiddenEdgeColor=new THREE.Color(this._outlineColor1),t++,this.array[t]=new r(new THREE.TAARenderPass(this.scene,this.camera)),this.array[t].type=\"TAARenderPass\",t++,this.array[t]=new r(new THREE.ShaderPass(THREE.FXAAShader)),this.array[t].type=\"ShaderPass\",this.array[t].effect.uniforms.resolution.value.set(1/this._width,1/this._height),this.array[t].sizeWindow=function(t,e){this.effect.uniforms.resolution.value.set(1/t,1/e)},t++;var e=this.camera.far,i=this.camera.near;this.camera.far=10,this.camera.near=3,this.array[t]=new r(new THREE.SAOPass(this.scene,this.camera,!0,!0)),this.array[t].type=\"SAOPass\",this.camera.far=e,this.camera.near=i,t++;for(var s=0;s<this.array.length;s++)this.object[this.array[s].type]=this.array[s];this.setObjInObj(this.object.SAOPass.effect.params,this._saoJSON),this.setObjInObj(this.object.OutlinePass.effect,this._strJSON),this.sizeWindow(this._width,this._height)}};this.setValue=function(t,e,i){\"outline\"==t&&1==this.object.OutlinePass.activ&&(this.object.OutlinePass.effect.selectedObjects=i)},this.drawRender=function(){this.clear(),1==this._renderPass&&(this.object.RenderPass.activ=!0,this.clear(!0),this.object.RenderPass.effect.renderToScreen=!0,this.composer.addPass(this.object.RenderPass.effect)),1==this._outlinePass&&(this.object.OutlinePass.activ=!0,this.composer.addPass(this.object.OutlinePass.effect)),1==this._taaPass&&(this.object.TAARenderPass.activ=!0,this.clear(!0),this.object.TAARenderPass.effect.renderToScreen=!0,this.composer.addPass(this.object.TAARenderPass.effect)),1==this._shaderPass&&(this.object.ShaderPass.activ=!0,this.clear(!0),this.object.ShaderPass.effect.renderToScreen=!0,this.composer.addPass(this.object.ShaderPass.effect)),1==this._saoPass&&(this.object.SAOPass.activ=!0,this.clear(!0),this.object.SAOPass.effect.renderToScreen=!0,this.composer.addPass(this.object.SAOPass.effect)),1==this._ssaoPass&&(this.object.SSAOPass.activ=!0,this.clear(!0),this.object.SSAOPass.effect.renderToScreen=!0,this.composer.addPass(this.object.SSAOPass.effect))},this.redrag=function(){for(var t=[],e=1;e<i.array.length;e++)1==i.array[e].activ&&t.push(i.array[e].type);this.startArray=t},this.setArrayMash=function(t,e){};var n=!0;this.render=function(){if(n=!1,0!=this.array.length){for(var t=0;t<this.array.length;t++)0!=this.array[t]._activ&&(this.array[t].render(),n=!0);return 1==n&&this.composer.render(),n}},this.sizeWindow=function(t,e){if(this._width=t,this._height=e,0!=this.array.length){this.composer.setSize(this._width,this._height);for(var i=0;i<this.array.length;i++)this.array[i].sizeWindow&&this.array[i].sizeWindow(t,e)}},this.clear=function(t){null==t&&(this.composer.passes.length=0);for(var e=0;e<this.array.length;e++)null==t&&(this.array[e].activ=!1),this.array[e].effect.renderToScreen=!1,this.array[e].effect.unbiased=!1}}function r(t){this.type=\"null\",this.effect=t,this._activ=!1,this.render=function(){}}i.d(e,\"a\",function(){return n}),n.prototype={set activ(t){this._activ!=t&&(this._activ=t)},get activ(){return this._activ},set startArray(t){this._startArray=t},get startArray(){return this._startArray},set renderPass(t){this._renderPass!=t&&(this._renderPass=t,this.drawRender())},get renderPass(){return this._renderPass},set outlinePass(t){this._outlinePass!=t&&(this._outlinePass=t,this.drawRender())},get outlinePass(){return this._outlinePass},set outlineColor(t){this._outlineColor!=t&&(this._outlineColor=t,this.object.OutlinePass.effect.visibleEdgeColor=new THREE.Color(this._outlineColor),trace(this._outlineColor,\"   \",this.object.OutlinePass.effect.visibleEdgeColor))},get outlineColor(){return this._outlineColor},set outlineColor1(t){this._outlineColor1!=t&&(this._outlineColor1=t,this.object.OutlinePass.effect.hiddenEdgeColor=new THREE.Color(this._outlineColor1))},get outlineColor1(){return this._outlineColor1},set strJSON(t){this._strJSON!=t&&(this._strJSON=t,this.setObjInObj(this.object.OutlinePass.effect,this._strJSON))},get strJSON(){return this._strJSON},set taaPass(t){this._taaPass!=t&&(this._taaPass=t,this.drawRender())},get taaPass(){return this._taaPass},set sampleLevel(t){this._sampleLevel!=t&&(this._sampleLevel=t,this.object.TAARenderPass.effect.sampleLevel=this._sampleLevel)},get sampleLevel(){return this._sampleLevel},set shaderPass(t){this._shaderPass!=t&&(this._shaderPass=t,this.drawRender())},get shaderPass(){return this._shaderPass},set saoPass(t){this._saoPass!=t&&(this._saoPass=t,this.drawRender())},get saoPass(){return this._saoPass},set saoJSON(t){this._saoJSON!=t&&(this._saoJSON=t,this.setObjInObj(this.object.SAOPass.effect.params,this._saoJSON))},get saoJSON(){return this._saoJSON}},r.prototype={set activ(t){this._activ!=t&&(this._activ=t)},get activ(){return this._activ}},THREE.StereoEffect=function(t){var e=new THREE.StereoCamera;e.aspect=.5,this.setSize=function(e,i){t.setSize(e,i)},this.render=function(i,s){i.updateMatrixWorld(),null===s.parent&&s.updateMatrixWorld(),e.update(s);var n=t.getSize();t.setScissorTest(!0),t.clear(),t.setScissor(0,0,n.width/2,n.height),t.setViewport(0,0,n.width/2,n.height),t.render(i,e.cameraL),t.setScissor(n.width/2,0,n.width/2,n.height),t.setViewport(n.width/2,0,n.width/2,n.height),t.render(i,e.cameraR),t.setScissorTest(!1)}},THREE.PeppersGhostEffect=function(t){var e,i,s,n=this;n.cameraDistance=15,n.reflectFromAbove=!1;var r=new THREE.PerspectiveCamera,o=new THREE.PerspectiveCamera,a=new THREE.PerspectiveCamera,h=new THREE.PerspectiveCamera,c=new THREE.Vector3,d=new THREE.Quaternion,l=new THREE.Vector3;t.autoClear=!1,this.setSize=function(n,r){e=n/2,n<r?(i=n/3,s=n/3):(i=r/3,s=r/3),t.setSize(n,r)},this.render=function(u,p){u.updateMatrixWorld(),null===p.parent&&p.updateMatrixWorld(),p.matrixWorld.decompose(c,d,l),r.position.copy(c),r.quaternion.copy(d),r.translateZ(n.cameraDistance),r.lookAt(u.position),o.position.copy(c),o.quaternion.copy(d),o.translateZ(-n.cameraDistance),o.lookAt(u.position),o.rotation.z+=Math.PI/180*180,a.position.copy(c),a.quaternion.copy(d),a.translateX(-n.cameraDistance),a.lookAt(u.position),a.rotation.x+=Math.PI/180*90,h.position.copy(c),h.quaternion.copy(d),h.translateX(n.cameraDistance),h.lookAt(u.position),h.rotation.x+=Math.PI/180*90,t.clear(),t.setScissorTest(!0),t.setScissor(e-i/2,2*s,i,s),t.setViewport(e-i/2,2*s,i,s),n.reflectFromAbove?t.render(u,o):t.render(u,r),t.setScissor(e-i/2,0,i,s),t.setViewport(e-i/2,0,i,s),n.reflectFromAbove?t.render(u,r):t.render(u,o),t.setScissor(e-i/2-i,s,i,s),t.setViewport(e-i/2-i,s,i,s),n.reflectFromAbove?t.render(u,h):t.render(u,a),t.setScissor(e+i/2,s,i,s),t.setViewport(e+i/2,s,i,s),n.reflectFromAbove?t.render(u,a):t.render(u,h),t.setScissorTest(!1)}},THREE.ParallaxBarrierEffect=function(t){var e=new THREE.OrthographicCamera(-1,1,1,-1,0,1),i=new THREE.Scene,s=new THREE.StereoCamera,n={minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat},r=new THREE.WebGLRenderTarget(512,512,n),o=new THREE.WebGLRenderTarget(512,512,n),a=new THREE.ShaderMaterial({uniforms:{mapLeft:{type:\"t\",value:r.texture},mapRight:{type:\"t\",value:o.texture}},vertexShader:[\"varying vec2 vUv;\",\"void main() {\",\"\\tvUv = vec2( uv.x, uv.y );\",\"\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\"}\"].join(\"\\n\"),fragmentShader:[\"uniform sampler2D mapLeft;\",\"uniform sampler2D mapRight;\",\"varying vec2 vUv;\",\"void main() {\",\"\\tvec2 uv = vUv;\",\"\\tif ( ( mod( gl_FragCoord.y, 2.0 ) ) > 1.00 ) {\",\"\\t\\tgl_FragColor = texture2D( mapLeft, uv );\",\"\\t} else {\",\"\\t\\tgl_FragColor = texture2D( mapRight, uv );\",\"\\t}\",\"}\"].join(\"\\n\")}),h=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),a);i.add(h),this.setSize=function(e,i){t.setSize(e,i);var s=t.getPixelRatio();r.setSize(e*s,i*s),o.setSize(e*s,i*s)},this.render=function(n,a){n.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),s.update(a),t.render(n,s.cameraL,r,!0),t.render(n,s.cameraR,o,!0),t.render(i,e)}},THREE.AnaglyphEffect=function(t,e,i){this.colorMatrixLeft=(new THREE.Matrix3).fromArray([1.0671679973602295,-.0016435992438346148,.0001777536963345483,-.028107794001698494,-.00019593400065787137,-.0002875397040043026,-.04279090091586113,15809757314855233e-21,-.00024287120322696865]),this.colorMatrixRight=(new THREE.Matrix3).fromArray([-.0355340838432312,-.06440307199954987,.018319187685847282,-.10269022732973099,.8079727292060852,-.04835830628871918,.0001224992738571018,-.009558862075209618,.567823588848114]);var s=new THREE.OrthographicCamera(-1,1,1,-1,0,1),n=new THREE.Scene,r=new THREE.StereoCamera,o={minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat};void 0===e&&(e=512),void 0===i&&(i=512);var a=new THREE.WebGLRenderTarget(e,i,o),h=new THREE.WebGLRenderTarget(e,i,o),c=new THREE.ShaderMaterial({uniforms:{mapLeft:{type:\"t\",value:a.texture},mapRight:{type:\"t\",value:h.texture},colorMatrixLeft:{type:\"m3\",value:this.colorMatrixLeft},colorMatrixRight:{type:\"m3\",value:this.colorMatrixRight}},vertexShader:[\"varying vec2 vUv;\",\"void main() {\",\"\\tvUv = vec2( uv.x, uv.y );\",\"\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\"}\"].join(\"\\n\"),fragmentShader:[\"uniform sampler2D mapLeft;\",\"uniform sampler2D mapRight;\",\"varying vec2 vUv;\",\"uniform mat3 colorMatrixLeft;\",\"uniform mat3 colorMatrixRight;\",\"float lin( float c ) {\",\"\\treturn c <= 0.04045 ? c * 0.0773993808 :\",\"\\t\\t\\tpow( c * 0.9478672986 + 0.0521327014, 2.4 );\",\"}\",\"vec4 lin( vec4 c ) {\",\"\\treturn vec4( lin( c.r ), lin( c.g ), lin( c.b ), c.a );\",\"}\",\"float dev( float c ) {\",\"\\treturn c <= 0.0031308 ? c * 12.92\",\"\\t\\t\\t: pow( c, 0.41666 ) * 1.055 - 0.055;\",\"}\",\"void main() {\",\"\\tvec2 uv = vUv;\",\"\\tvec4 colorL = lin( texture2D( mapLeft, uv ) );\",\"\\tvec4 colorR = lin( texture2D( mapRight, uv ) );\",\"\\tvec3 color = clamp(\",\"\\t\\t\\tcolorMatrixLeft * colorL.rgb +\",\"\\t\\t\\tcolorMatrixRight * colorR.rgb, 0., 1. );\",\"\\tgl_FragColor = vec4(\",\"\\t\\t\\tdev( color.r ), dev( color.g ), dev( color.b ),\",\"\\t\\t\\tmax( colorL.a, colorR.a ) );\",\"}\"].join(\"\\n\")}),d=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),c);n.add(d),this.setSize=function(e,i){t.setSize(e,i);var s=t.getPixelRatio();a.setSize(e*s,i*s),h.setSize(e*s,i*s)},this.render=function(e,i){e.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),r.update(i),t.render(e,r.cameraL,a,!0),t.render(e,r.cameraR,h,!0),t.render(n,s)},this.dispose=function(){a&&a.dispose(),h&&h.dispose()}},THREE.AsciiEffect=function(t,e,i){e=void 0===e?\" .:-=+*#%@\":e,i||(i={});var s,n,r=i.resolution?i.resolution:.15,o=i.scale?i.scale:1,a=!!i.color&&i.color,h=!!i.alpha&&i.alpha,c=!!i.block&&i.block,d=!!i.invert&&i.invert,l=document.createElement(\"div\");l.style.cursor=\"default\";var u,p,f,m=document.createElement(\"table\");l.appendChild(m),this.setSize=function(e,i){s=e,n=i,t.setSize(e,i),function(){u=Math.round(s*y),p=Math.round(n*y),x.width=u,x.height=p,(f=t.domElement).style.backgroundColor&&(m.rows[0].cells[0].style.backgroundColor=f.style.backgroundColor,m.rows[0].cells[0].style.color=f.style.color);m.cellSpacing=0,m.cellPadding=0;var e=m.style;e.display=\"inline\",e.width=Math.round(u/y*o)+\"px\",e.height=Math.round(p/y*o)+\"px\",e.whiteSpace=\"pre\",e.margin=\"0px\",e.padding=\"0px\",e.letterSpacing=D+\"px\",e.fontFamily=_,e.fontSize=R+\"px\",e.lineHeight=T+\"px\",e.textAlign=\"left\",e.textDecoration=\"none\"}()},this.render=function(e,i){t.render(e,i),function(t,e){w.clearRect(0,0,u,p),w.drawImage(b,0,0,u,p);for(var i=w.getImageData(0,0,u,p).data,s=\"\",n=0;n<p;n+=2){for(var r=0;r<u;r++){var o,l,f=4*(n*u+r),m=i[f],v=i[f+1],g=i[f+2],_=i[f+3];l=(.3*m+.59*v+.11*g)/255,0==_&&(l=1),o=Math.floor((1-l)*(E.length-1)),d&&(o=E.length-o-1);var x=E[o];void 0!==x&&\" \"!=x||(x=\"&nbsp;\"),s+=a?\"<span style='color:rgb(\"+m+\",\"+v+\",\"+g+\");\"+(c?\"background-color:rgb(\"+m+\",\"+v+\",\"+g+\");\":\"\")+(h?\"opacity:\"+_/255+\";\":\"\")+\"'>\"+x+\"</span>\":x}s+=\"<br/>\"}e.innerHTML=\"<tr><td>\"+s+\"</td></tr>\"}(0,m)},this.domElement=l;var v=\" .,:;i1tfLCG08@\".split(\"\"),g=\" CGO08@\".split(\"\"),_=\"courier new, monospace\",b=t.domElement,x=document.createElement(\"canvas\");if(x.getContext){var w=x.getContext(\"2d\");if(w.getImageData){var E=a?g:v;e&&(E=e);var y=.5;y=.25,r&&(y=r);var R=2/y*o,T=2/y*o,D=0;switch(o){case 1:D=-1;break;case 2:case 3:D=-2.1;break;case 4:D=-3.1;break;case 5:D=-4.15}0}}},THREE.SSAARenderPass=function(t,e,i,s){THREE.Pass.call(this),this.scene=t,this.camera=e,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==i?i:0,this.clearAlpha=void 0!==s?s:0,void 0===THREE.CopyShader&&console.error(\"THREE.SSAARenderPass relies on THREE.CopyShader\");var n=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(n.uniforms),this.copyMaterial=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.camera2=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new THREE.Scene,this.quad2=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},THREE.SSAARenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(t,e){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(t,e)},render:function(t,e,i){this.sampleRenderTarget||(this.sampleRenderTarget=new THREE.WebGLRenderTarget(i.width,i.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),this.sampleRenderTarget.texture.name=\"SSAARenderPass.sample\");var s=THREE.SSAARenderPass.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],n=t.autoClear;t.autoClear=!1;var r=t.getClearColor().getHex(),o=t.getClearAlpha(),a=1/s.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var h=i.width,c=i.height,d=0;d<s.length;d++){var l=s[d];this.camera.setViewOffset&&this.camera.setViewOffset(h,c,.0625*l[0],.0625*l[1],h,c);var u=a;if(this.unbiased)u+=1/32*((d+.5)/s.length-.5);this.copyUniforms.opacity.value=u,t.setClearColor(this.clearColor,this.clearAlpha),t.render(this.scene,this.camera,this.sampleRenderTarget,!0),0===d&&t.setClearColor(0,0),t.render(this.scene2,this.camera2,this.renderToScreen?null:e,0===d)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),t.autoClear=n,t.setClearColor(r,o)}}),THREE.SSAARenderPass.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]],THREE.TAARenderPass=function(t,e,i){void 0===THREE.SSAARenderPass&&console.error(\"THREE.TAARenderPass relies on THREE.SSAARenderPass\"),THREE.SSAARenderPass.call(this,t,e,i),this.sampleLevel=0,this.accumulate=!1},THREE.TAARenderPass.JitterVectors=THREE.SSAARenderPass.JitterVectors,THREE.TAARenderPass.prototype=Object.assign(Object.create(THREE.SSAARenderPass.prototype),{constructor:THREE.TAARenderPass,render:function(t,e,i,s){if(!this.accumulate)return THREE.SSAARenderPass.prototype.render.call(this,t,e,i,s),void(this.accumulateIndex=-1);var n=THREE.TAARenderPass.JitterVectors[5];this.sampleRenderTarget||(this.sampleRenderTarget=new THREE.WebGLRenderTarget(i.width,i.height,this.params),this.sampleRenderTarget.texture.name=\"TAARenderPass.sample\"),this.holdRenderTarget||(this.holdRenderTarget=new THREE.WebGLRenderTarget(i.width,i.height,this.params),this.holdRenderTarget.texture.name=\"TAARenderPass.hold\"),this.accumulate&&-1===this.accumulateIndex&&(THREE.SSAARenderPass.prototype.render.call(this,t,this.holdRenderTarget,i,s),this.accumulateIndex=0);var r=t.autoClear;t.autoClear=!1;var o=1/n.length;if(this.accumulateIndex>=0&&this.accumulateIndex<n.length){this.copyUniforms.opacity.value=o,this.copyUniforms.tDiffuse.value=e.texture;for(var a=Math.pow(2,this.sampleLevel),h=0;h<a;h++){var c=n[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(i.width,i.height,.0625*c[0],.0625*c[1],i.width,i.height),t.render(this.scene,this.camera,e,!0),t.render(this.scene2,this.camera2,this.sampleRenderTarget,0===this.accumulateIndex),this.accumulateIndex++,this.accumulateIndex>=n.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}var d=this.accumulateIndex*o;d>0&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,t.render(this.scene2,this.camera2,e,!0)),d<1&&(this.copyUniforms.opacity.value=1-d,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,t.render(this.scene2,this.camera2,e,0===d)),t.autoClear=r}})},function(t,e,i){\"use strict\";i.d(e,\"a\",function(){return s});i(4),i(1),i(3);function s(t,e){var i=this;this.parent=t,this.content2d=e,this.drag=!0,this.zdvigX=0,this.sPixi=void 0,this.pause=!1,this.minMaxX=new THREE.Vector2(0,2.5),this.zume=new THREE.Vector3(1,30,10),this.point=new THREE.Vector2(0,0),this.point1=new THREE.Vector2(0,0),this.b=0,this.minZum=0,this.maxZum=5e3,this.powerZum=5,this.distMinMaxBox=500,this.isDragPan=t._isDragPan,this.isRotateScene=!1;var s=0;this.getStage=function(t){return null==t.parent?t:this.getStage(t.parent)},this.stageMoveNew=function(t){var e;if(1!=i.pause&&0!=i.drag)return t.data&&i.isDragPan&&r?(e=t.data.originalEvent,h.set(e.clientX,e.clientY),c.subVectors(h,a),i.moveCamXY(c),void a.copy(h)):void(null!=i.content2d?t.data&&i.isRotateScene&&t.data.originalEvent.shiftKey?(i.parent.scene.rotation.y=s+.01*(pl102.global.x-i.point1.x),i.parent.intRend=1):(i.parent.rotationX=i.point.y-.01*(pl102.global.y-i.point1.y),i.minMaxX.x>i.parent.rotationX&&(i.parent.rotationX=i.minMaxX.x),i.minMaxX.y<i.parent.rotationX&&(i.parent.rotationX=i.minMaxX.y),i.parent.rotationZ=i.point.x+.01*(pl102.global.x-i.point1.x)):t.data&&i.isRotateScene&&t.data.originalEvent.shiftKey?(i.parent.scene.rotation.y=s+.01*(t.clientX-i.point1.x),i.parent.intRend=1):(i.parent.rotationX=i.point.y-.01*(t.clientY-i.point1.y),i.minMaxX.x>i.parent.rotationX&&(i.parent.rotationX=i.minMaxX.x),i.minMaxX.y<i.parent.rotationX&&(i.parent.rotationX=i.minMaxX.y),i.parent.rotationZ=i.point.x+.01*(t.clientX-i.point1.x)))},this.stageUpNew=function(e){null!=i.content2d?(pl102.isMouseEvents&&(i.sPixi.off(\"mouseup\",i.stageUpNew),i.sPixi.off(\"mousemove\",i.stageMoveNew)),pl102.isTouchEvents&&(i.sPixi.off(\"touchend\",i.stageUpNew),i.sPixi.off(\"touchmove\",i.stageMoveNew))):(document.body.removeEventListener(\"mouseup\",i.stageUpNew),t.renderer.domElement.removeEventListener(\"mousemove\",i.stageMoveNew))},this.mouseUpp=function(t){i.parent.intRend=1};var n,r=!1;this.mouseDown=function(e){var n;1!=i.pause&&(0!=i.drag&&(r=!1,i.isDragPan&&e&&1===e.data.originalEvent.button&&(r=!0,n=e.data.originalEvent,a.set(n.clientX,n.clientY)),i.point.y=i.parent.rotationX,i.point.x=i.parent.rotationZ,i.isRotateScene&&(s=i.parent.scene.rotation.y),null!=i.content2d?(i.point1.x=pl102.global.x,i.point1.y=pl102.global.y,pl102.isMouseEvents&&(i.sPixi.off(\"mouseup\",i.stageUpNew),i.sPixi.off(\"mousemove\",i.stageMoveNew),i.sPixi.on(\"mouseup\",i.stageUpNew),i.sPixi.on(\"mousemove\",i.stageMoveNew)),pl102.isTouchEvents&&(i.sPixi.off(\"touchend\",i.stageUpNew),i.sPixi.off(\"touchmove\",i.stageMoveNew),i.sPixi.on(\"touchend\",i.stageUpNew),i.sPixi.on(\"touchmove\",i.stageMoveNew))):(i.point1.x=e.clientX,i.point1.y=e.clientY,document.body.addEventListener(\"mouseup\",i.stageUpNew),t.renderer.domElement.addEventListener(\"mousemove\",i.stageMoveNew))))},this.mousewheel=function(t){1!=i.pause&&0!=i.drag&&((n=i.parent._zume+-t.delta*i.powerZum)<i.minZum&&(n=i.minZum),n>i.maxZum&&(n=i.maxZum),i.parent.zume=n,i.parent.intRend=1)},null!=this.content2d?(this.sPixi=this.getStage(this.content2d),this.sPixi.interactive=!0,0==pl102.devas?(e.on(\"mousedown\",this.mouseDown),pl102Wheel.on(e,\"mousewheel\",this.mousewheel)):e.on(\"touchstart\",this.mouseDown)):t.renderer.domElement.addEventListener(\"mousedown\",function(t){i.mouseDown(t)},!0);var o=new THREE.Vector3,a=new THREE.Vector2,h=new THREE.Vector2,c=new THREE.Vector2;var d,l=(d=new THREE.Vector3,function(t,e){d.setFromMatrixColumn(e,0),d.multiplyScalar(-t),o.add(d)}),u=function(){var t=new THREE.Vector3;return function(e,i){t.setFromMatrixColumn(i,1),t.multiplyScalar(e),o.add(t)}}(),p=function(t,e){var s=i.parent.renderer.domElement;if(i.parent.camera.isPerspectiveCamera){var n=Math.max(i.parent.zume,10);n*=Math.tan(i.parent.camera.fov/2*Math.PI/180),l(2*t*n/s.clientHeight,i.parent.camera.matrixWorld),u(2*e*n/s.clientHeight,i.parent.camera.matrixWorld)}else console.warn(\"WARNING: camera neither perspective.\")};this.moveCamXY=function(t){o.set(0,0,0),i.parent.camera.updateMatrixWorld(),i.parent.scene.updateMatrixWorld(),arguments.length>1&&(t={x:arguments[0],y:arguments[1]}),p(t.x||0,t.y||0),i.parent.xVerh+=o.x,i.parent.yVerh+=-o.y,i.parent.zVerh+=o.z,i.parent.xVerh=Math.max(Math.min(i.parent.xVerh,i.distMinMaxBox),-i.distMinMaxBox),i.parent.zVerh=Math.max(Math.min(i.parent.zVerh,i.distMinMaxBox),-i.distMinMaxBox),i.parent.yVerh=Math.max(Math.min(i.parent.yVerh,i.distMinMaxBox),-i.distMinMaxBox),o.set(0,0,0)}}},function(t,e,i){\"use strict\";i.r(e),function(t){var s=i(2);i.d(e,\"BCScene\",function(){return s.a}),t.BCScene=s.a}.call(this,i(9))},function(t,e){var i;i=function(){return this}();try{i=i||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(i=window)}t.exports=i}]);","extractedComments":[]}